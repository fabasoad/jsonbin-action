(()=>{var e={7351:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(s===undefined)s=r;Object.defineProperty(e,s,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,s){if(s===undefined)s=r;e[s]=t[r]});var n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))s(t,e,r);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.issue=t.issueCommand=void 0;const o=i(r(2037));const a=r(5278);function issueCommand(e,t,r){const s=new Command(e,t,r);process.stdout.write(s.toString()+o.EOL)}t.issueCommand=issueCommand;function issue(e,t=""){issueCommand(e,{},t)}t.issue=issue;const c="::";class Command{constructor(e,t,r){if(!e){e="missing.command"}this.command=e;this.properties=t;this.message=r}toString(){let e=c+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let t=true;for(const r in this.properties){if(this.properties.hasOwnProperty(r)){const s=this.properties[r];if(s){if(t){t=false}else{e+=","}e+=`${r}=${escapeProperty(s)}`}}}}e+=`${c}${escapeData(this.message)}`;return e}}function escapeData(e){return a.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(e){return a.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},2186:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(s===undefined)s=r;Object.defineProperty(e,s,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,s){if(s===undefined)s=r;e[s]=t[r]});var n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))s(t,e,r);n(t,e);return t};var o=this&&this.__awaiter||function(e,t,r,s){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,n){function fulfilled(e){try{step(s.next(e))}catch(e){n(e)}}function rejected(e){try{step(s["throw"](e))}catch(e){n(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.getIDToken=t.getState=t.saveState=t.group=t.endGroup=t.startGroup=t.info=t.notice=t.warning=t.error=t.debug=t.isDebug=t.setFailed=t.setCommandEcho=t.setOutput=t.getBooleanInput=t.getMultilineInput=t.getInput=t.addPath=t.setSecret=t.exportVariable=t.ExitCode=void 0;const a=r(7351);const c=r(717);const u=r(5278);const l=i(r(2037));const h=i(r(1017));const d=r(8041);var p;(function(e){e[e["Success"]=0]="Success";e[e["Failure"]=1]="Failure"})(p=t.ExitCode||(t.ExitCode={}));function exportVariable(e,t){const r=u.toCommandValue(t);process.env[e]=r;const s=process.env["GITHUB_ENV"]||"";if(s){const t="_GitHubActionsFileCommandDelimeter_";const s=`${e}<<${t}${l.EOL}${r}${l.EOL}${t}`;c.issueCommand("ENV",s)}else{a.issueCommand("set-env",{name:e},r)}}t.exportVariable=exportVariable;function setSecret(e){a.issueCommand("add-mask",{},e)}t.setSecret=setSecret;function addPath(e){const t=process.env["GITHUB_PATH"]||"";if(t){c.issueCommand("PATH",e)}else{a.issueCommand("add-path",{},e)}process.env["PATH"]=`${e}${h.delimiter}${process.env["PATH"]}`}t.addPath=addPath;function getInput(e,t){const r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r){throw new Error(`Input required and not supplied: ${e}`)}if(t&&t.trimWhitespace===false){return r}return r.trim()}t.getInput=getInput;function getMultilineInput(e,t){const r=getInput(e,t).split("\n").filter((e=>e!==""));return r}t.getMultilineInput=getMultilineInput;function getBooleanInput(e,t){const r=["true","True","TRUE"];const s=["false","False","FALSE"];const n=getInput(e,t);if(r.includes(n))return true;if(s.includes(n))return false;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}\n`+`Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}t.getBooleanInput=getBooleanInput;function setOutput(e,t){process.stdout.write(l.EOL);a.issueCommand("set-output",{name:e},t)}t.setOutput=setOutput;function setCommandEcho(e){a.issue("echo",e?"on":"off")}t.setCommandEcho=setCommandEcho;function setFailed(e){process.exitCode=p.Failure;error(e)}t.setFailed=setFailed;function isDebug(){return process.env["RUNNER_DEBUG"]==="1"}t.isDebug=isDebug;function debug(e){a.issueCommand("debug",{},e)}t.debug=debug;function error(e,t={}){a.issueCommand("error",u.toCommandProperties(t),e instanceof Error?e.toString():e)}t.error=error;function warning(e,t={}){a.issueCommand("warning",u.toCommandProperties(t),e instanceof Error?e.toString():e)}t.warning=warning;function notice(e,t={}){a.issueCommand("notice",u.toCommandProperties(t),e instanceof Error?e.toString():e)}t.notice=notice;function info(e){process.stdout.write(e+l.EOL)}t.info=info;function startGroup(e){a.issue("group",e)}t.startGroup=startGroup;function endGroup(){a.issue("endgroup")}t.endGroup=endGroup;function group(e,t){return o(this,void 0,void 0,(function*(){startGroup(e);let r;try{r=yield t()}finally{endGroup()}return r}))}t.group=group;function saveState(e,t){a.issueCommand("save-state",{name:e},t)}t.saveState=saveState;function getState(e){return process.env[`STATE_${e}`]||""}t.getState=getState;function getIDToken(e){return o(this,void 0,void 0,(function*(){return yield d.OidcClient.getIDToken(e)}))}t.getIDToken=getIDToken},717:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(s===undefined)s=r;Object.defineProperty(e,s,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,s){if(s===undefined)s=r;e[s]=t[r]});var n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))s(t,e,r);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.issueCommand=void 0;const o=i(r(7147));const a=i(r(2037));const c=r(5278);function issueCommand(e,t){const r=process.env[`GITHUB_${e}`];if(!r){throw new Error(`Unable to find environment variable for file command ${e}`)}if(!o.existsSync(r)){throw new Error(`Missing file at path: ${r}`)}o.appendFileSync(r,`${c.toCommandValue(t)}${a.EOL}`,{encoding:"utf8"})}t.issueCommand=issueCommand},8041:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,n){function fulfilled(e){try{step(s.next(e))}catch(e){n(e)}}function rejected(e){try{step(s["throw"](e))}catch(e){n(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.OidcClient=void 0;const n=r(9925);const i=r(3702);const o=r(2186);class OidcClient{static createHttpClient(e=true,t=10){const r={allowRetries:e,maxRetries:t};return new n.HttpClient("actions/oidc-client",[new i.BearerCredentialHandler(OidcClient.getRequestToken())],r)}static getRequestToken(){const e=process.env["ACTIONS_ID_TOKEN_REQUEST_TOKEN"];if(!e){throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable")}return e}static getIDTokenUrl(){const e=process.env["ACTIONS_ID_TOKEN_REQUEST_URL"];if(!e){throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable")}return e}static getCall(e){var t;return s(this,void 0,void 0,(function*(){const r=OidcClient.createHttpClient();const s=yield r.getJson(e).catch((e=>{throw new Error(`Failed to get ID Token. \n \n        Error Code : ${e.statusCode}\n \n        Error Message: ${e.result.message}`)}));const n=(t=s.result)===null||t===void 0?void 0:t.value;if(!n){throw new Error("Response json body do not have ID Token field")}return n}))}static getIDToken(e){return s(this,void 0,void 0,(function*(){try{let t=OidcClient.getIDTokenUrl();if(e){const r=encodeURIComponent(e);t=`${t}&audience=${r}`}o.debug(`ID token url is ${t}`);const r=yield OidcClient.getCall(t);o.setSecret(r);return r}catch(e){throw new Error(`Error message: ${e.message}`)}}))}}t.OidcClient=OidcClient},5278:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toCommandProperties=t.toCommandValue=void 0;function toCommandValue(e){if(e===null||e===undefined){return""}else if(typeof e==="string"||e instanceof String){return e}return JSON.stringify(e)}t.toCommandValue=toCommandValue;function toCommandProperties(e){if(!Object.keys(e).length){return{}}return{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}}t.toCommandProperties=toCommandProperties},3702:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});class BasicCredentialHandler{constructor(e,t){this.username=e;this.password=t}prepareRequest(e){e.headers["Authorization"]="Basic "+Buffer.from(this.username+":"+this.password).toString("base64")}canHandleAuthentication(e){return false}handleAuthentication(e,t,r){return null}}t.BasicCredentialHandler=BasicCredentialHandler;class BearerCredentialHandler{constructor(e){this.token=e}prepareRequest(e){e.headers["Authorization"]="Bearer "+this.token}canHandleAuthentication(e){return false}handleAuthentication(e,t,r){return null}}t.BearerCredentialHandler=BearerCredentialHandler;class PersonalAccessTokenCredentialHandler{constructor(e){this.token=e}prepareRequest(e){e.headers["Authorization"]="Basic "+Buffer.from("PAT:"+this.token).toString("base64")}canHandleAuthentication(e){return false}handleAuthentication(e,t,r){return null}}t.PersonalAccessTokenCredentialHandler=PersonalAccessTokenCredentialHandler},9925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const s=r(3685);const n=r(5687);const i=r(6443);let o;var a;(function(e){e[e["OK"]=200]="OK";e[e["MultipleChoices"]=300]="MultipleChoices";e[e["MovedPermanently"]=301]="MovedPermanently";e[e["ResourceMoved"]=302]="ResourceMoved";e[e["SeeOther"]=303]="SeeOther";e[e["NotModified"]=304]="NotModified";e[e["UseProxy"]=305]="UseProxy";e[e["SwitchProxy"]=306]="SwitchProxy";e[e["TemporaryRedirect"]=307]="TemporaryRedirect";e[e["PermanentRedirect"]=308]="PermanentRedirect";e[e["BadRequest"]=400]="BadRequest";e[e["Unauthorized"]=401]="Unauthorized";e[e["PaymentRequired"]=402]="PaymentRequired";e[e["Forbidden"]=403]="Forbidden";e[e["NotFound"]=404]="NotFound";e[e["MethodNotAllowed"]=405]="MethodNotAllowed";e[e["NotAcceptable"]=406]="NotAcceptable";e[e["ProxyAuthenticationRequired"]=407]="ProxyAuthenticationRequired";e[e["RequestTimeout"]=408]="RequestTimeout";e[e["Conflict"]=409]="Conflict";e[e["Gone"]=410]="Gone";e[e["TooManyRequests"]=429]="TooManyRequests";e[e["InternalServerError"]=500]="InternalServerError";e[e["NotImplemented"]=501]="NotImplemented";e[e["BadGateway"]=502]="BadGateway";e[e["ServiceUnavailable"]=503]="ServiceUnavailable";e[e["GatewayTimeout"]=504]="GatewayTimeout"})(a=t.HttpCodes||(t.HttpCodes={}));var c;(function(e){e["Accept"]="accept";e["ContentType"]="content-type"})(c=t.Headers||(t.Headers={}));var u;(function(e){e["ApplicationJson"]="application/json"})(u=t.MediaTypes||(t.MediaTypes={}));function getProxyUrl(e){let t=i.getProxyUrl(new URL(e));return t?t.href:""}t.getProxyUrl=getProxyUrl;const l=[a.MovedPermanently,a.ResourceMoved,a.SeeOther,a.TemporaryRedirect,a.PermanentRedirect];const h=[a.BadGateway,a.ServiceUnavailable,a.GatewayTimeout];const d=["OPTIONS","GET","DELETE","HEAD"];const p=10;const m=5;class HttpClientError extends Error{constructor(e,t){super(e);this.name="HttpClientError";this.statusCode=t;Object.setPrototypeOf(this,HttpClientError.prototype)}}t.HttpClientError=HttpClientError;class HttpClientResponse{constructor(e){this.message=e}readBody(){return new Promise((async(e,t)=>{let r=Buffer.alloc(0);this.message.on("data",(e=>{r=Buffer.concat([r,e])}));this.message.on("end",(()=>{e(r.toString())}))}))}}t.HttpClientResponse=HttpClientResponse;function isHttps(e){let t=new URL(e);return t.protocol==="https:"}t.isHttps=isHttps;class HttpClient{constructor(e,t,r){this._ignoreSslError=false;this._allowRedirects=true;this._allowRedirectDowngrade=false;this._maxRedirects=50;this._allowRetries=false;this._maxRetries=1;this._keepAlive=false;this._disposed=false;this.userAgent=e;this.handlers=t||[];this.requestOptions=r;if(r){if(r.ignoreSslError!=null){this._ignoreSslError=r.ignoreSslError}this._socketTimeout=r.socketTimeout;if(r.allowRedirects!=null){this._allowRedirects=r.allowRedirects}if(r.allowRedirectDowngrade!=null){this._allowRedirectDowngrade=r.allowRedirectDowngrade}if(r.maxRedirects!=null){this._maxRedirects=Math.max(r.maxRedirects,0)}if(r.keepAlive!=null){this._keepAlive=r.keepAlive}if(r.allowRetries!=null){this._allowRetries=r.allowRetries}if(r.maxRetries!=null){this._maxRetries=r.maxRetries}}}options(e,t){return this.request("OPTIONS",e,null,t||{})}get(e,t){return this.request("GET",e,null,t||{})}del(e,t){return this.request("DELETE",e,null,t||{})}post(e,t,r){return this.request("POST",e,t,r||{})}patch(e,t,r){return this.request("PATCH",e,t,r||{})}put(e,t,r){return this.request("PUT",e,t,r||{})}head(e,t){return this.request("HEAD",e,null,t||{})}sendStream(e,t,r,s){return this.request(e,t,r,s)}async getJson(e,t={}){t[c.Accept]=this._getExistingOrDefaultHeader(t,c.Accept,u.ApplicationJson);let r=await this.get(e,t);return this._processResponse(r,this.requestOptions)}async postJson(e,t,r={}){let s=JSON.stringify(t,null,2);r[c.Accept]=this._getExistingOrDefaultHeader(r,c.Accept,u.ApplicationJson);r[c.ContentType]=this._getExistingOrDefaultHeader(r,c.ContentType,u.ApplicationJson);let n=await this.post(e,s,r);return this._processResponse(n,this.requestOptions)}async putJson(e,t,r={}){let s=JSON.stringify(t,null,2);r[c.Accept]=this._getExistingOrDefaultHeader(r,c.Accept,u.ApplicationJson);r[c.ContentType]=this._getExistingOrDefaultHeader(r,c.ContentType,u.ApplicationJson);let n=await this.put(e,s,r);return this._processResponse(n,this.requestOptions)}async patchJson(e,t,r={}){let s=JSON.stringify(t,null,2);r[c.Accept]=this._getExistingOrDefaultHeader(r,c.Accept,u.ApplicationJson);r[c.ContentType]=this._getExistingOrDefaultHeader(r,c.ContentType,u.ApplicationJson);let n=await this.patch(e,s,r);return this._processResponse(n,this.requestOptions)}async request(e,t,r,s){if(this._disposed){throw new Error("Client has already been disposed.")}let n=new URL(t);let i=this._prepareRequest(e,n,s);let o=this._allowRetries&&d.indexOf(e)!=-1?this._maxRetries+1:1;let c=0;let u;while(c<o){u=await this.requestRaw(i,r);if(u&&u.message&&u.message.statusCode===a.Unauthorized){let e;for(let t=0;t<this.handlers.length;t++){if(this.handlers[t].canHandleAuthentication(u)){e=this.handlers[t];break}}if(e){return e.handleAuthentication(this,i,r)}else{return u}}let t=this._maxRedirects;while(l.indexOf(u.message.statusCode)!=-1&&this._allowRedirects&&t>0){const o=u.message.headers["location"];if(!o){break}let a=new URL(o);if(n.protocol=="https:"&&n.protocol!=a.protocol&&!this._allowRedirectDowngrade){throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.")}await u.readBody();if(a.hostname!==n.hostname){for(let e in s){if(e.toLowerCase()==="authorization"){delete s[e]}}}i=this._prepareRequest(e,a,s);u=await this.requestRaw(i,r);t--}if(h.indexOf(u.message.statusCode)==-1){return u}c+=1;if(c<o){await u.readBody();await this._performExponentialBackoff(c)}}return u}dispose(){if(this._agent){this._agent.destroy()}this._disposed=true}requestRaw(e,t){return new Promise(((r,s)=>{let callbackForResult=function(e,t){if(e){s(e)}r(t)};this.requestRawWithCallback(e,t,callbackForResult)}))}requestRawWithCallback(e,t,r){let s;if(typeof t==="string"){e.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8")}let n=false;let handleResult=(e,t)=>{if(!n){n=true;r(e,t)}};let i=e.httpModule.request(e.options,(e=>{let t=new HttpClientResponse(e);handleResult(null,t)}));i.on("socket",(e=>{s=e}));i.setTimeout(this._socketTimeout||3*6e4,(()=>{if(s){s.end()}handleResult(new Error("Request timeout: "+e.options.path),null)}));i.on("error",(function(e){handleResult(e,null)}));if(t&&typeof t==="string"){i.write(t,"utf8")}if(t&&typeof t!=="string"){t.on("close",(function(){i.end()}));t.pipe(i)}else{i.end()}}getAgent(e){let t=new URL(e);return this._getAgent(t)}_prepareRequest(e,t,r){const i={};i.parsedUrl=t;const o=i.parsedUrl.protocol==="https:";i.httpModule=o?n:s;const a=o?443:80;i.options={};i.options.host=i.parsedUrl.hostname;i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):a;i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||"");i.options.method=e;i.options.headers=this._mergeHeaders(r);if(this.userAgent!=null){i.options.headers["user-agent"]=this.userAgent}i.options.agent=this._getAgent(i.parsedUrl);if(this.handlers){this.handlers.forEach((e=>{e.prepareRequest(i.options)}))}return i}_mergeHeaders(e){const lowercaseKeys=e=>Object.keys(e).reduce(((t,r)=>(t[r.toLowerCase()]=e[r],t)),{});if(this.requestOptions&&this.requestOptions.headers){return Object.assign({},lowercaseKeys(this.requestOptions.headers),lowercaseKeys(e))}return lowercaseKeys(e||{})}_getExistingOrDefaultHeader(e,t,r){const lowercaseKeys=e=>Object.keys(e).reduce(((t,r)=>(t[r.toLowerCase()]=e[r],t)),{});let s;if(this.requestOptions&&this.requestOptions.headers){s=lowercaseKeys(this.requestOptions.headers)[t]}return e[t]||s||r}_getAgent(e){let t;let a=i.getProxyUrl(e);let c=a&&a.hostname;if(this._keepAlive&&c){t=this._proxyAgent}if(this._keepAlive&&!c){t=this._agent}if(!!t){return t}const u=e.protocol==="https:";let l=100;if(!!this.requestOptions){l=this.requestOptions.maxSockets||s.globalAgent.maxSockets}if(c){if(!o){o=r(4294)}const e={maxSockets:l,keepAlive:this._keepAlive,proxy:{...(a.username||a.password)&&{proxyAuth:`${a.username}:${a.password}`},host:a.hostname,port:a.port}};let s;const n=a.protocol==="https:";if(u){s=n?o.httpsOverHttps:o.httpsOverHttp}else{s=n?o.httpOverHttps:o.httpOverHttp}t=s(e);this._proxyAgent=t}if(this._keepAlive&&!t){const e={keepAlive:this._keepAlive,maxSockets:l};t=u?new n.Agent(e):new s.Agent(e);this._agent=t}if(!t){t=u?n.globalAgent:s.globalAgent}if(u&&this._ignoreSslError){t.options=Object.assign(t.options||{},{rejectUnauthorized:false})}return t}_performExponentialBackoff(e){e=Math.min(p,e);const t=m*Math.pow(2,e);return new Promise((e=>setTimeout((()=>e()),t)))}static dateTimeDeserializer(e,t){if(typeof t==="string"){let e=new Date(t);if(!isNaN(e.valueOf())){return e}}return t}async _processResponse(e,t){return new Promise((async(r,s)=>{const n=e.message.statusCode;const i={statusCode:n,result:null,headers:{}};if(n==a.NotFound){r(i)}let o;let c;try{c=await e.readBody();if(c&&c.length>0){if(t&&t.deserializeDates){o=JSON.parse(c,HttpClient.dateTimeDeserializer)}else{o=JSON.parse(c)}i.result=o}i.headers=e.message.headers}catch(e){}if(n>299){let e;if(o&&o.message){e=o.message}else if(c&&c.length>0){e=c}else{e="Failed request: ("+n+")"}let t=new HttpClientError(e,n);t.result=i.result;s(t)}else{r(i)}}))}}t.HttpClient=HttpClient},6443:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});function getProxyUrl(e){let t=e.protocol==="https:";let r;if(checkBypass(e)){return r}let s;if(t){s=process.env["https_proxy"]||process.env["HTTPS_PROXY"]}else{s=process.env["http_proxy"]||process.env["HTTP_PROXY"]}if(s){r=new URL(s)}return r}t.getProxyUrl=getProxyUrl;function checkBypass(e){if(!e.hostname){return false}let t=process.env["no_proxy"]||process.env["NO_PROXY"]||"";if(!t){return false}let r;if(e.port){r=Number(e.port)}else if(e.protocol==="http:"){r=80}else if(e.protocol==="https:"){r=443}let s=[e.hostname.toUpperCase()];if(typeof r==="number"){s.push(`${s[0]}:${r}`)}for(let e of t.split(",").map((e=>e.trim().toUpperCase())).filter((e=>e))){if(s.some((t=>t===e))){return true}}return false}t.checkBypass=checkBypass},7678:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function isTypedArrayName(e){return r.includes(e)}const s=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement",...r];function isObjectTypeName(e){return s.includes(e)}const n=["null","undefined","string","number","bigint","boolean","symbol"];function isPrimitiveTypeName(e){return n.includes(e)}function isOfType(e){return t=>typeof t===e}const{toString:i}=Object.prototype;const getObjectType=e=>{const t=i.call(e).slice(8,-1);if(/HTML\w+Element/.test(t)&&is.domElement(e)){return"HTMLElement"}if(isObjectTypeName(t)){return t}return undefined};const isObjectOfType=e=>t=>getObjectType(t)===e;function is(e){if(e===null){return"null"}switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(is.observable(e)){return"Observable"}if(is.array(e)){return"Array"}if(is.buffer(e)){return"Buffer"}const t=getObjectType(e);if(t){return t}if(e instanceof String||e instanceof Boolean||e instanceof Number){throw new TypeError("Please don't use object wrappers for primitive types")}return"Object"}is.undefined=isOfType("undefined");is.string=isOfType("string");const o=isOfType("number");is.number=e=>o(e)&&!is.nan(e);is.bigint=isOfType("bigint");is.function_=isOfType("function");is.null_=e=>e===null;is.class_=e=>is.function_(e)&&e.toString().startsWith("class ");is.boolean=e=>e===true||e===false;is.symbol=isOfType("symbol");is.numericString=e=>is.string(e)&&!is.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e));is.array=(e,t)=>{if(!Array.isArray(e)){return false}if(!is.function_(t)){return true}return e.every(t)};is.buffer=e=>{var t,r,s,n;return(n=(s=(r=(t=e)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.isBuffer)===null||s===void 0?void 0:s.call(r,e))!==null&&n!==void 0?n:false};is.nullOrUndefined=e=>is.null_(e)||is.undefined(e);is.object=e=>!is.null_(e)&&(typeof e==="object"||is.function_(e));is.iterable=e=>{var t;return is.function_((t=e)===null||t===void 0?void 0:t[Symbol.iterator])};is.asyncIterable=e=>{var t;return is.function_((t=e)===null||t===void 0?void 0:t[Symbol.asyncIterator])};is.generator=e=>{var t,r;return is.iterable(e)&&is.function_((t=e)===null||t===void 0?void 0:t.next)&&is.function_((r=e)===null||r===void 0?void 0:r.throw)};is.asyncGenerator=e=>is.asyncIterable(e)&&is.function_(e.next)&&is.function_(e.throw);is.nativePromise=e=>isObjectOfType("Promise")(e);const hasPromiseAPI=e=>{var t,r;return is.function_((t=e)===null||t===void 0?void 0:t.then)&&is.function_((r=e)===null||r===void 0?void 0:r.catch)};is.promise=e=>is.nativePromise(e)||hasPromiseAPI(e);is.generatorFunction=isObjectOfType("GeneratorFunction");is.asyncGeneratorFunction=e=>getObjectType(e)==="AsyncGeneratorFunction";is.asyncFunction=e=>getObjectType(e)==="AsyncFunction";is.boundFunction=e=>is.function_(e)&&!e.hasOwnProperty("prototype");is.regExp=isObjectOfType("RegExp");is.date=isObjectOfType("Date");is.error=isObjectOfType("Error");is.map=e=>isObjectOfType("Map")(e);is.set=e=>isObjectOfType("Set")(e);is.weakMap=e=>isObjectOfType("WeakMap")(e);is.weakSet=e=>isObjectOfType("WeakSet")(e);is.int8Array=isObjectOfType("Int8Array");is.uint8Array=isObjectOfType("Uint8Array");is.uint8ClampedArray=isObjectOfType("Uint8ClampedArray");is.int16Array=isObjectOfType("Int16Array");is.uint16Array=isObjectOfType("Uint16Array");is.int32Array=isObjectOfType("Int32Array");is.uint32Array=isObjectOfType("Uint32Array");is.float32Array=isObjectOfType("Float32Array");is.float64Array=isObjectOfType("Float64Array");is.bigInt64Array=isObjectOfType("BigInt64Array");is.bigUint64Array=isObjectOfType("BigUint64Array");is.arrayBuffer=isObjectOfType("ArrayBuffer");is.sharedArrayBuffer=isObjectOfType("SharedArrayBuffer");is.dataView=isObjectOfType("DataView");is.enumCase=(e,t)=>Object.values(t).includes(e);is.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype;is.urlInstance=e=>isObjectOfType("URL")(e);is.urlString=e=>{if(!is.string(e)){return false}try{new URL(e);return true}catch(e){return false}};is.truthy=e=>Boolean(e);is.falsy=e=>!e;is.nan=e=>Number.isNaN(e);is.primitive=e=>is.null_(e)||isPrimitiveTypeName(typeof e);is.integer=e=>Number.isInteger(e);is.safeInteger=e=>Number.isSafeInteger(e);is.plainObject=e=>{if(i.call(e)!=="[object Object]"){return false}const t=Object.getPrototypeOf(e);return t===null||t===Object.getPrototypeOf({})};is.typedArray=e=>isTypedArrayName(getObjectType(e));const isValidLength=e=>is.safeInteger(e)&&e>=0;is.arrayLike=e=>!is.nullOrUndefined(e)&&!is.function_(e)&&isValidLength(e.length);is.inRange=(e,t)=>{if(is.number(t)){return e>=Math.min(0,t)&&e<=Math.max(t,0)}if(is.array(t)&&t.length===2){return e>=Math.min(...t)&&e<=Math.max(...t)}throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};const a=1;const c=["innerHTML","ownerDocument","style","attributes","nodeValue"];is.domElement=e=>is.object(e)&&e.nodeType===a&&is.string(e.nodeName)&&!is.plainObject(e)&&c.every((t=>t in e));is.observable=e=>{var t,r,s,n;if(!e){return false}if(e===((r=(t=e)[Symbol.observable])===null||r===void 0?void 0:r.call(t))){return true}if(e===((n=(s=e)["@@observable"])===null||n===void 0?void 0:n.call(s))){return true}return false};is.nodeStream=e=>is.object(e)&&is.function_(e.pipe)&&!is.observable(e);is.infinite=e=>e===Infinity||e===-Infinity;const isAbsoluteMod2=e=>t=>is.integer(t)&&Math.abs(t%2)===e;is.evenInteger=isAbsoluteMod2(0);is.oddInteger=isAbsoluteMod2(1);is.emptyArray=e=>is.array(e)&&e.length===0;is.nonEmptyArray=e=>is.array(e)&&e.length>0;is.emptyString=e=>is.string(e)&&e.length===0;is.nonEmptyString=e=>is.string(e)&&e.length>0;const isWhiteSpaceString=e=>is.string(e)&&!/\S/.test(e);is.emptyStringOrWhitespace=e=>is.emptyString(e)||isWhiteSpaceString(e);is.emptyObject=e=>is.object(e)&&!is.map(e)&&!is.set(e)&&Object.keys(e).length===0;is.nonEmptyObject=e=>is.object(e)&&!is.map(e)&&!is.set(e)&&Object.keys(e).length>0;is.emptySet=e=>is.set(e)&&e.size===0;is.nonEmptySet=e=>is.set(e)&&e.size>0;is.emptyMap=e=>is.map(e)&&e.size===0;is.nonEmptyMap=e=>is.map(e)&&e.size>0;is.propertyKey=e=>is.any([is.string,is.number,is.symbol],e);is.formData=e=>isObjectOfType("FormData")(e);is.urlSearchParams=e=>isObjectOfType("URLSearchParams")(e);const predicateOnArray=(e,t,r)=>{if(!is.function_(t)){throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`)}if(r.length===0){throw new TypeError("Invalid number of values")}return e.call(r,t)};is.any=(e,...t)=>{const r=is.array(e)?e:[e];return r.some((e=>predicateOnArray(Array.prototype.some,e,t)))};is.all=(e,...t)=>predicateOnArray(Array.prototype.every,e,t);const assertType=(e,t,r,s={})=>{if(!e){const{multipleValues:e}=s;const n=e?`received values of types ${[...new Set(r.map((e=>`\`${is(e)}\``)))].join(", ")}`:`received value of type \`${is(r)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${n}.`)}};t.assert={undefined:e=>assertType(is.undefined(e),"undefined",e),string:e=>assertType(is.string(e),"string",e),number:e=>assertType(is.number(e),"number",e),bigint:e=>assertType(is.bigint(e),"bigint",e),function_:e=>assertType(is.function_(e),"Function",e),null_:e=>assertType(is.null_(e),"null",e),class_:e=>assertType(is.class_(e),"Class",e),boolean:e=>assertType(is.boolean(e),"boolean",e),symbol:e=>assertType(is.symbol(e),"symbol",e),numericString:e=>assertType(is.numericString(e),"string with a number",e),array:(e,t)=>{const r=assertType;r(is.array(e),"Array",e);if(t){e.forEach(t)}},buffer:e=>assertType(is.buffer(e),"Buffer",e),nullOrUndefined:e=>assertType(is.nullOrUndefined(e),"null or undefined",e),object:e=>assertType(is.object(e),"Object",e),iterable:e=>assertType(is.iterable(e),"Iterable",e),asyncIterable:e=>assertType(is.asyncIterable(e),"AsyncIterable",e),generator:e=>assertType(is.generator(e),"Generator",e),asyncGenerator:e=>assertType(is.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>assertType(is.nativePromise(e),"native Promise",e),promise:e=>assertType(is.promise(e),"Promise",e),generatorFunction:e=>assertType(is.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>assertType(is.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>assertType(is.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>assertType(is.boundFunction(e),"Function",e),regExp:e=>assertType(is.regExp(e),"RegExp",e),date:e=>assertType(is.date(e),"Date",e),error:e=>assertType(is.error(e),"Error",e),map:e=>assertType(is.map(e),"Map",e),set:e=>assertType(is.set(e),"Set",e),weakMap:e=>assertType(is.weakMap(e),"WeakMap",e),weakSet:e=>assertType(is.weakSet(e),"WeakSet",e),int8Array:e=>assertType(is.int8Array(e),"Int8Array",e),uint8Array:e=>assertType(is.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>assertType(is.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>assertType(is.int16Array(e),"Int16Array",e),uint16Array:e=>assertType(is.uint16Array(e),"Uint16Array",e),int32Array:e=>assertType(is.int32Array(e),"Int32Array",e),uint32Array:e=>assertType(is.uint32Array(e),"Uint32Array",e),float32Array:e=>assertType(is.float32Array(e),"Float32Array",e),float64Array:e=>assertType(is.float64Array(e),"Float64Array",e),bigInt64Array:e=>assertType(is.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>assertType(is.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>assertType(is.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>assertType(is.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>assertType(is.dataView(e),"DataView",e),enumCase:(e,t)=>assertType(is.enumCase(e,t),"EnumCase",e),urlInstance:e=>assertType(is.urlInstance(e),"URL",e),urlString:e=>assertType(is.urlString(e),"string with a URL",e),truthy:e=>assertType(is.truthy(e),"truthy",e),falsy:e=>assertType(is.falsy(e),"falsy",e),nan:e=>assertType(is.nan(e),"NaN",e),primitive:e=>assertType(is.primitive(e),"primitive",e),integer:e=>assertType(is.integer(e),"integer",e),safeInteger:e=>assertType(is.safeInteger(e),"integer",e),plainObject:e=>assertType(is.plainObject(e),"plain object",e),typedArray:e=>assertType(is.typedArray(e),"TypedArray",e),arrayLike:e=>assertType(is.arrayLike(e),"array-like",e),domElement:e=>assertType(is.domElement(e),"HTMLElement",e),observable:e=>assertType(is.observable(e),"Observable",e),nodeStream:e=>assertType(is.nodeStream(e),"Node.js Stream",e),infinite:e=>assertType(is.infinite(e),"infinite number",e),emptyArray:e=>assertType(is.emptyArray(e),"empty array",e),nonEmptyArray:e=>assertType(is.nonEmptyArray(e),"non-empty array",e),emptyString:e=>assertType(is.emptyString(e),"empty string",e),nonEmptyString:e=>assertType(is.nonEmptyString(e),"non-empty string",e),emptyStringOrWhitespace:e=>assertType(is.emptyStringOrWhitespace(e),"empty string or whitespace",e),emptyObject:e=>assertType(is.emptyObject(e),"empty object",e),nonEmptyObject:e=>assertType(is.nonEmptyObject(e),"non-empty object",e),emptySet:e=>assertType(is.emptySet(e),"empty set",e),nonEmptySet:e=>assertType(is.nonEmptySet(e),"non-empty set",e),emptyMap:e=>assertType(is.emptyMap(e),"empty map",e),nonEmptyMap:e=>assertType(is.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>assertType(is.propertyKey(e),"PropertyKey",e),formData:e=>assertType(is.formData(e),"FormData",e),urlSearchParams:e=>assertType(is.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>assertType(is.evenInteger(e),"even integer",e),oddInteger:e=>assertType(is.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>assertType(is.directInstanceOf(e,t),"T",e),inRange:(e,t)=>assertType(is.inRange(e,t),"in range",e),any:(e,...t)=>assertType(is.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:true}),all:(e,...t)=>assertType(is.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:true})};Object.defineProperties(is,{class:{value:is.class_},function:{value:is.function_},null:{value:is.null_}});Object.defineProperties(t.assert,{class:{value:t.assert.class_},function:{value:t.assert.function_},null:{value:t.assert.null_}});t["default"]=is;e.exports=is;e.exports["default"]=is;e.exports.assert=t.assert},2286:(e,t,r)=>{"use strict";const{V4MAPPED:s,ADDRCONFIG:n,ALL:i,promises:{Resolver:o},lookup:a}=r(9523);const{promisify:c}=r(3837);const u=r(2037);const l=Symbol("cacheableLookupCreateConnection");const h=Symbol("cacheableLookupInstance");const d=Symbol("expires");const p=typeof i==="number";const verifyAgent=e=>{if(!(e&&typeof e.createConnection==="function")){throw new Error("Expected an Agent instance as the first argument")}};const map4to6=e=>{for(const t of e){if(t.family===6){continue}t.address=`::ffff:${t.address}`;t.family=6}};const getIfaceInfo=()=>{let e=false;let t=false;for(const r of Object.values(u.networkInterfaces())){for(const s of r){if(s.internal){continue}if(s.family==="IPv6"){t=true}else{e=true}if(e&&t){return{has4:e,has6:t}}}}return{has4:e,has6:t}};const isIterable=e=>Symbol.iterator in e;const ignoreNoResultErrors=e=>e.catch((e=>{if(e.code==="ENODATA"||e.code==="ENOTFOUND"||e.code==="ENOENT"){return[]}throw e}));const m={ttl:true};const y={all:true};const g={all:true,family:4};const _={all:true,family:6};class CacheableLookup{constructor({cache:e=new Map,maxTtl:t=Infinity,fallbackDuration:r=3600,errorTtl:s=.15,resolver:n=new o,lookup:i=a}={}){this.maxTtl=t;this.errorTtl=s;this._cache=e;this._resolver=n;this._dnsLookup=i&&c(i);if(this._resolver instanceof o){this._resolve4=this._resolver.resolve4.bind(this._resolver);this._resolve6=this._resolver.resolve6.bind(this._resolver)}else{this._resolve4=c(this._resolver.resolve4.bind(this._resolver));this._resolve6=c(this._resolver.resolve6.bind(this._resolver))}this._iface=getIfaceInfo();this._pending={};this._nextRemovalTime=false;this._hostnamesToFallback=new Set;this.fallbackDuration=r;if(r>0){const e=setInterval((()=>{this._hostnamesToFallback.clear()}),r*1e3);if(e.unref){e.unref()}this._fallbackInterval=e}this.lookup=this.lookup.bind(this);this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear();this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,r){if(typeof t==="function"){r=t;t={}}else if(typeof t==="number"){t={family:t}}if(!r){throw new Error("Callback must be a function.")}this.lookupAsync(e,t).then((e=>{if(t.all){r(null,e)}else{r(null,e.address,e.family,e.expires,e.ttl)}}),r)}async lookupAsync(e,t={}){if(typeof t==="number"){t={family:t}}let r=await this.query(e);if(t.family===6){const e=r.filter((e=>e.family===6));if(t.hints&s){if(p&&t.hints&i||e.length===0){map4to6(r)}else{r=e}}else{r=e}}else if(t.family===4){r=r.filter((e=>e.family===4))}if(t.hints&n){const{_iface:e}=this;r=r.filter((t=>t.family===6?e.has6:e.has4))}if(r.length===0){const t=new Error(`cacheableLookup ENOTFOUND ${e}`);t.code="ENOTFOUND";t.hostname=e;throw t}if(t.all){return r}return r[0]}async query(e){let t=await this._cache.get(e);if(!t){const r=this._pending[e];if(r){t=await r}else{const r=this.queryAndCache(e);this._pending[e]=r;try{t=await r}finally{delete this._pending[e]}}}t=t.map((e=>({...e})));return t}async _resolve(e){const[t,r]=await Promise.all([ignoreNoResultErrors(this._resolve4(e,m)),ignoreNoResultErrors(this._resolve6(e,m))]);let s=0;let n=0;let i=0;const o=Date.now();for(const e of t){e.family=4;e.expires=o+e.ttl*1e3;s=Math.max(s,e.ttl)}for(const e of r){e.family=6;e.expires=o+e.ttl*1e3;n=Math.max(n,e.ttl)}if(t.length>0){if(r.length>0){i=Math.min(s,n)}else{i=s}}else{i=n}return{entries:[...t,...r],cacheTtl:i}}async _lookup(e){try{const[t,r]=await Promise.all([ignoreNoResultErrors(this._dnsLookup(e,g)),ignoreNoResultErrors(this._dnsLookup(e,_))]);return{entries:[...t,...r],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,t,r){if(this.maxTtl>0&&r>0){r=Math.min(r,this.maxTtl)*1e3;t[d]=Date.now()+r;try{await this._cache.set(e,t,r)}catch(e){this.lookupAsync=async()=>{const t=new Error("Cache Error. Please recreate the CacheableLookup instance.");t.cause=e;throw t}}if(isIterable(this._cache)){this._tick(r)}}}async queryAndCache(e){if(this._hostnamesToFallback.has(e)){return this._dnsLookup(e,y)}let t=await this._resolve(e);if(t.entries.length===0&&this._dnsLookup){t=await this._lookup(e);if(t.entries.length!==0&&this.fallbackDuration>0){this._hostnamesToFallback.add(e)}}const r=t.entries.length===0?this.errorTtl:t.cacheTtl;await this._set(e,t.entries,r);return t.entries}_tick(e){const t=this._nextRemovalTime;if(!t||e<t){clearTimeout(this._removalTimeout);this._nextRemovalTime=e;this._removalTimeout=setTimeout((()=>{this._nextRemovalTime=false;let e=Infinity;const t=Date.now();for(const[r,s]of this._cache){const n=s[d];if(t>=n){this._cache.delete(r)}else if(n<e){e=n}}if(e!==Infinity){this._tick(e-t)}}),e);if(this._removalTimeout.unref){this._removalTimeout.unref()}}}install(e){verifyAgent(e);if(l in e){throw new Error("CacheableLookup has been already installed")}e[l]=e.createConnection;e[h]=this;e.createConnection=(t,r)=>{if(!("lookup"in t)){t.lookup=this.lookup}return e[l](t,r)}}uninstall(e){verifyAgent(e);if(e[l]){if(e[h]!==this){throw new Error("The agent is not owned by this CacheableLookup instance")}e.createConnection=e[l];delete e[l];delete e[h]}}updateInterfaceInfo(){const{_iface:e}=this;this._iface=getIfaceInfo();if(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6){this._cache.clear()}}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}}e.exports=CacheableLookup;e.exports["default"]=CacheableLookup},4340:(e,t,r)=>{"use strict";const{PassThrough:s}=r(2781);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const n=r==="buffer";let i=false;if(t){i=!(r||n)}else{r=r||"utf8"}if(n){r=null}const o=new s({objectMode:i});if(r){o.setEncoding(r)}let a=0;const c=[];o.on("data",(e=>{c.push(e);if(i){a=c.length}else{a+=e.length}}));o.getBufferedValue=()=>{if(t){return c}return n?Buffer.concat(c,a):c.join("")};o.getBufferedLength=()=>a;return o}},7040:(e,t,r)=>{"use strict";const{constants:s}=r(4300);const n=r(8341);const i=r(4340);class MaxBufferError extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}}async function getStream(e,t){if(!e){return Promise.reject(new Error("Expected a stream"))}t={maxBuffer:Infinity,...t};const{maxBuffer:r}=t;let o;await new Promise(((a,c)=>{const rejectPromise=e=>{if(e&&o.getBufferedLength()<=s.MAX_LENGTH){e.bufferedData=o.getBufferedValue()}c(e)};o=n(e,i(t),(e=>{if(e){rejectPromise(e);return}a()}));o.on("data",(()=>{if(o.getBufferedLength()>r){rejectPromise(new MaxBufferError)}}))}));return o.getBufferedValue()}e.exports=getStream;e.exports["default"]=getStream;e.exports.buffer=(e,t)=>getStream(e,{...t,encoding:"buffer"});e.exports.array=(e,t)=>getStream(e,{...t,array:true});e.exports.MaxBufferError=MaxBufferError},8116:(e,t,r)=>{"use strict";const s=r(2361);const n=r(7310);const i=r(7952);const o=r(7040);const a=r(1002);const c=r(9004);const u=r(9662);const l=r(1312);const h=r(1531);class CacheableRequest{constructor(e,t){if(typeof e!=="function"){throw new TypeError("Parameter `request` must be a function")}this.cache=new h({uri:typeof t==="string"&&t,store:typeof t!=="string"&&t,namespace:"cacheable-request"});return this.createCacheableRequest(e)}createCacheableRequest(e){return(t,r)=>{let h;if(typeof t==="string"){h=normalizeUrlObject(n.parse(t));t={}}else if(t instanceof n.URL){h=normalizeUrlObject(n.parse(t.toString()));t={}}else{const[e,...r]=(t.path||"").split("?");const s=r.length>0?`?${r.join("?")}`:"";h=normalizeUrlObject({...t,pathname:e,search:s})}t={headers:{},method:"GET",cache:true,strictTtl:false,automaticFailover:false,...t,...urlObjectToRequestOptions(h)};t.headers=u(t.headers);const d=new s;const p=i(n.format(h),{stripWWW:false,removeTrailingSlash:false,stripAuthentication:false});const m=`${t.method}:${p}`;let y=false;let g=false;const makeRequest=t=>{g=true;let s=false;let n;const i=new Promise((e=>{n=()=>{if(!s){s=true;e()}}}));const handler=e=>{if(y&&!t.forceRefresh){e.status=e.statusCode;const r=a.fromObject(y.cachePolicy).revalidatedPolicy(t,e);if(!r.modified){const t=r.policy.responseHeaders();e=new c(y.statusCode,t,y.body,y.url);e.cachePolicy=r.policy;e.fromCache=true}}if(!e.fromCache){e.cachePolicy=new a(t,e,t);e.fromCache=false}let n;if(t.cache&&e.cachePolicy.storable()){n=l(e);(async()=>{try{const r=o.buffer(e);await Promise.race([i,new Promise((t=>e.once("end",t)))]);if(s){return}const n=await r;const a={cachePolicy:e.cachePolicy.toObject(),url:e.url,statusCode:e.fromCache?y.statusCode:e.statusCode,body:n};let c=t.strictTtl?e.cachePolicy.timeToLive():undefined;if(t.maxTtl){c=c?Math.min(c,t.maxTtl):t.maxTtl}await this.cache.set(m,a,c)}catch(e){d.emit("error",new CacheableRequest.CacheError(e))}})()}else if(t.cache&&y){(async()=>{try{await this.cache.delete(m)}catch(e){d.emit("error",new CacheableRequest.CacheError(e))}})()}d.emit("response",n||e);if(typeof r==="function"){r(n||e)}};try{const r=e(t,handler);r.once("error",n);r.once("abort",n);d.emit("request",r)}catch(e){d.emit("error",new CacheableRequest.RequestError(e))}};(async()=>{const get=async e=>{await Promise.resolve();const t=e.cache?await this.cache.get(m):undefined;if(typeof t==="undefined"){return makeRequest(e)}const s=a.fromObject(t.cachePolicy);if(s.satisfiesWithoutRevalidation(e)&&!e.forceRefresh){const e=s.responseHeaders();const n=new c(t.statusCode,e,t.body,t.url);n.cachePolicy=s;n.fromCache=true;d.emit("response",n);if(typeof r==="function"){r(n)}}else{y=t;e.headers=s.revalidationHeaders(e);makeRequest(e)}};const errorHandler=e=>d.emit("error",new CacheableRequest.CacheError(e));this.cache.once("error",errorHandler);d.on("response",(()=>this.cache.removeListener("error",errorHandler)));try{await get(t)}catch(e){if(t.automaticFailover&&!g){makeRequest(t)}d.emit("error",new CacheableRequest.CacheError(e))}})();return d}}}function urlObjectToRequestOptions(e){const t={...e};t.path=`${e.pathname||"/"}${e.search||""}`;delete t.pathname;delete t.search;return t}function normalizeUrlObject(e){return{protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}}CacheableRequest.RequestError=class extends Error{constructor(e){super(e.message);this.name="RequestError";Object.assign(this,e)}};CacheableRequest.CacheError=class extends Error{constructor(e){super(e.message);this.name="CacheError";Object.assign(this,e)}};e.exports=CacheableRequest},9372:e=>{"use strict";const t=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];e.exports=(e,r)=>{const s=new Set(Object.keys(e).concat(t));for(const t of s){if(t in r){continue}r[t]=typeof e[t]==="function"?e[t].bind(e):e[t]}}},1312:(e,t,r)=>{"use strict";const s=r(2781).PassThrough;const n=r(9372);const cloneResponse=e=>{if(!(e&&e.pipe)){throw new TypeError("Parameter `response` must be a response stream.")}const t=new s;n(e,t);return e.pipe(t)};e.exports=cloneResponse},2391:(e,t,r)=>{"use strict";const{Transform:s,PassThrough:n}=r(2781);const i=r(9796);const o=r(2610);e.exports=e=>{const t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t)){return e}const r=t==="br";if(r&&typeof i.createBrotliDecompress!=="function"){e.destroy(new Error("Brotli is not supported on Node.js < 12"));return e}let a=true;const c=new s({transform(e,t,r){a=false;r(null,e)},flush(e){e()}});const u=new n({autoDestroy:false,destroy(t,r){e.destroy();r(t)}});const l=r?i.createBrotliDecompress():i.createUnzip();l.once("error",(t=>{if(a&&!e.readable){u.end();return}u.destroy(t)}));o(e,u);e.pipe(c).pipe(l).pipe(u);return u}},6214:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});function isTLSSocket(e){return e.encrypted}const deferToConnect=(e,t)=>{let r;if(typeof t==="function"){const e=t;r={connect:e}}else{r=t}const s=typeof r.connect==="function";const n=typeof r.secureConnect==="function";const i=typeof r.close==="function";const onConnect=()=>{if(s){r.connect()}if(isTLSSocket(e)&&n){if(e.authorized){r.secureConnect()}else if(!e.authorizationError){e.once("secureConnect",r.secureConnect)}}if(i){e.once("close",r.close)}};if(e.writable&&!e.connecting){onConnect()}else if(e.connecting){e.once("connect",onConnect)}else if(e.destroyed&&i){r.close(e._hadError)}};t["default"]=deferToConnect;e.exports=deferToConnect;e.exports["default"]=deferToConnect},1205:(e,t,r)=>{var s=r(1223);var noop=function(){};var isRequest=function(e){return e.setHeader&&typeof e.abort==="function"};var isChildProcess=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3};var eos=function(e,t,r){if(typeof t==="function")return eos(e,null,t);if(!t)t={};r=s(r||noop);var n=e._writableState;var i=e._readableState;var o=t.readable||t.readable!==false&&e.readable;var a=t.writable||t.writable!==false&&e.writable;var c=false;var onlegacyfinish=function(){if(!e.writable)onfinish()};var onfinish=function(){a=false;if(!o)r.call(e)};var onend=function(){o=false;if(!a)r.call(e)};var onexit=function(t){r.call(e,t?new Error("exited with error code: "+t):null)};var onerror=function(t){r.call(e,t)};var onclose=function(){process.nextTick(onclosenexttick)};var onclosenexttick=function(){if(c)return;if(o&&!(i&&(i.ended&&!i.destroyed)))return r.call(e,new Error("premature close"));if(a&&!(n&&(n.ended&&!n.destroyed)))return r.call(e,new Error("premature close"))};var onrequest=function(){e.req.on("finish",onfinish)};if(isRequest(e)){e.on("complete",onfinish);e.on("abort",onclose);if(e.req)onrequest();else e.on("request",onrequest)}else if(a&&!n){e.on("end",onlegacyfinish);e.on("close",onlegacyfinish)}if(isChildProcess(e))e.on("exit",onexit);e.on("end",onend);e.on("finish",onfinish);if(t.error!==false)e.on("error",onerror);e.on("close",onclose);return function(){c=true;e.removeListener("complete",onfinish);e.removeListener("abort",onclose);e.removeListener("request",onrequest);if(e.req)e.req.removeListener("finish",onfinish);e.removeListener("end",onlegacyfinish);e.removeListener("close",onlegacyfinish);e.removeListener("finish",onfinish);e.removeListener("exit",onexit);e.removeListener("end",onend);e.removeListener("error",onerror);e.removeListener("close",onclose)}};e.exports=eos},1585:(e,t,r)=>{"use strict";const{PassThrough:s}=r(2781);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const n=r==="buffer";let i=false;if(t){i=!(r||n)}else{r=r||"utf8"}if(n){r=null}const o=new s({objectMode:i});if(r){o.setEncoding(r)}let a=0;const c=[];o.on("data",(e=>{c.push(e);if(i){a=c.length}else{a+=e.length}}));o.getBufferedValue=()=>{if(t){return c}return n?Buffer.concat(c,a):c.join("")};o.getBufferedLength=()=>a;return o}},1766:(e,t,r)=>{"use strict";const{constants:s}=r(4300);const n=r(2781);const{promisify:i}=r(3837);const o=r(1585);const a=i(n.pipeline);class MaxBufferError extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}}async function getStream(e,t){if(!e){throw new Error("Expected a stream")}t={maxBuffer:Infinity,...t};const{maxBuffer:r}=t;const n=o(t);await new Promise(((t,i)=>{const rejectPromise=e=>{if(e&&n.getBufferedLength()<=s.MAX_LENGTH){e.bufferedData=n.getBufferedValue()}i(e)};(async()=>{try{await a(e,n);t()}catch(e){rejectPromise(e)}})();n.on("data",(()=>{if(n.getBufferedLength()>r){rejectPromise(new MaxBufferError)}}))}));return n.getBufferedValue()}e.exports=getStream;e.exports.buffer=(e,t)=>getStream(e,{...t,encoding:"buffer"});e.exports.array=(e,t)=>getStream(e,{...t,array:true});e.exports.MaxBufferError=MaxBufferError},1002:e=>{"use strict";const t=new Set([200,203,204,206,300,301,404,405,410,414,501]);const r=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]);const s=new Set([500,502,503,504]);const n={date:true,connection:true,"keep-alive":true,"proxy-authenticate":true,"proxy-authorization":true,te:true,trailer:true,"transfer-encoding":true,upgrade:true};const i={"content-length":true,"content-encoding":true,"transfer-encoding":true,"content-range":true};function toNumberOrZero(e){const t=parseInt(e,10);return isFinite(t)?t:0}function isErrorResponse(e){if(!e){return true}return s.has(e.status)}function parseCacheControl(e){const t={};if(!e)return t;const r=e.trim().split(/\s*,\s*/);for(const e of r){const[r,s]=e.split(/\s*=\s*/,2);t[r]=s===undefined?true:s.replace(/^"|"$/g,"")}return t}function formatCacheControl(e){let t=[];for(const r in e){const s=e[r];t.push(s===true?r:r+"="+s)}if(!t.length){return undefined}return t.join(", ")}e.exports=class CachePolicy{constructor(e,t,{shared:r,cacheHeuristic:s,immutableMinTimeToLive:n,ignoreCargoCult:i,_fromObject:o}={}){if(o){this._fromObject(o);return}if(!t||!t.headers){throw Error("Response headers missing")}this._assertRequestHasHeaders(e);this._responseTime=this.now();this._isShared=r!==false;this._cacheHeuristic=undefined!==s?s:.1;this._immutableMinTtl=undefined!==n?n:24*3600*1e3;this._status="status"in t?t.status:200;this._resHeaders=t.headers;this._rescc=parseCacheControl(t.headers["cache-control"]);this._method="method"in e?e.method:"GET";this._url=e.url;this._host=e.headers.host;this._noAuthorization=!e.headers.authorization;this._reqHeaders=t.headers.vary?e.headers:null;this._reqcc=parseCacheControl(e.headers["cache-control"]);if(i&&"pre-check"in this._rescc&&"post-check"in this._rescc){delete this._rescc["pre-check"];delete this._rescc["post-check"];delete this._rescc["no-cache"];delete this._rescc["no-store"];delete this._rescc["must-revalidate"];this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":formatCacheControl(this._rescc)});delete this._resHeaders.expires;delete this._resHeaders.pragma}if(t.headers["cache-control"]==null&&/no-cache/.test(t.headers.pragma)){this._rescc["no-cache"]=true}}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())&&r.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||t.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers){throw Error("Request headers missing")}}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);const t=parseCacheControl(e.headers["cache-control"]);if(t["no-cache"]||/no-cache/.test(e.headers.pragma)){return false}if(t["max-age"]&&this.age()>t["max-age"]){return false}if(t["min-fresh"]&&this.timeToLive()<1e3*t["min-fresh"]){return false}if(this.stale()){const e=t["max-stale"]&&!this._rescc["must-revalidate"]&&(true===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge());if(!e){return false}}return this._requestMatches(e,false)}_requestMatches(e,t){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&"HEAD"===e.method)&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary){return true}if(this._resHeaders.vary==="*"){return false}const t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const r of t){if(e.headers[r]!==this._reqHeaders[r])return false}return true}_copyWithoutHopByHopHeaders(e){const t={};for(const r in e){if(n[r])continue;t[r]=e[r]}if(e.connection){const r=e.connection.trim().split(/\s*,\s*/);for(const e of r){delete t[e]}}if(t.warning){const e=t.warning.split(/,/).filter((e=>!/^\s*1[0-9][0-9]/.test(e)));if(!e.length){delete t.warning}else{t.warning=e.join(",").trim()}}return t}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders);const t=this.age();if(t>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24){e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'}e.age=`${Math.round(t)}`;e.date=new Date(this.now()).toUTCString();return e}date(){const e=Date.parse(this._resHeaders.date);if(isFinite(e)){return e}return this._responseTime}age(){let e=this._ageValue();const t=(this.now()-this._responseTime)/1e3;return e+t}_ageValue(){return toNumberOrZero(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]){return 0}if(this._isShared&&(this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)){return 0}if(this._resHeaders.vary==="*"){return 0}if(this._isShared){if(this._rescc["proxy-revalidate"]){return 0}if(this._rescc["s-maxage"]){return toNumberOrZero(this._rescc["s-maxage"])}}if(this._rescc["max-age"]){return toNumberOrZero(this._rescc["max-age"])}const e=this._rescc.immutable?this._immutableMinTtl:0;const t=this.date();if(this._resHeaders.expires){const r=Date.parse(this._resHeaders.expires);if(Number.isNaN(r)||r<t){return 0}return Math.max(e,(r-t)/1e3)}if(this._resHeaders["last-modified"]){const r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&t>r){return Math.max(e,(t-r)/1e3*this._cacheHeuristic)}}return e}timeToLive(){const e=this.maxAge()-this.age();const t=e+toNumberOrZero(this._rescc["stale-if-error"]);const r=e+toNumberOrZero(this._rescc["stale-while-revalidate"]);return Math.max(0,e,t,r)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+toNumberOrZero(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+toNumberOrZero(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(undefined,undefined,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t;this._isShared=e.sh;this._cacheHeuristic=e.ch;this._immutableMinTtl=e.imm!==undefined?e.imm:24*3600*1e3;this._status=e.st;this._resHeaders=e.resh;this._rescc=e.rescc;this._method=e.m;this._url=e.u;this._host=e.h;this._noAuthorization=e.a;this._reqHeaders=e.reqh;this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const t=this._copyWithoutHopByHopHeaders(e.headers);delete t["if-range"];if(!this._requestMatches(e,true)||!this.storable()){delete t["if-none-match"];delete t["if-modified-since"];return t}if(this._resHeaders.etag){t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag}const r=t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&this._method!="GET";if(r){delete t["if-modified-since"];if(t["if-none-match"]){const e=t["if-none-match"].split(/,/).filter((e=>!/^\s*W\//.test(e)));if(!e.length){delete t["if-none-match"]}else{t["if-none-match"]=e.join(",").trim()}}}else if(this._resHeaders["last-modified"]&&!t["if-modified-since"]){t["if-modified-since"]=this._resHeaders["last-modified"]}return t}revalidatedPolicy(e,t){this._assertRequestHasHeaders(e);if(this._useStaleIfError()&&isErrorResponse(t)){return{modified:false,matches:false,policy:this}}if(!t||!t.headers){throw Error("Response headers missing")}let r=false;if(t.status!==undefined&&t.status!=304){r=false}else if(t.headers.etag&&!/^\s*W\//.test(t.headers.etag)){r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag}else if(this._resHeaders.etag&&t.headers.etag){r=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,"")}else if(this._resHeaders["last-modified"]){r=this._resHeaders["last-modified"]===t.headers["last-modified"]}else{if(!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!t.headers.etag&&!t.headers["last-modified"]){r=true}}if(!r){return{policy:new this.constructor(e,t),modified:t.status!=304,matches:false}}const s={};for(const e in this._resHeaders){s[e]=e in t.headers&&!i[e]?t.headers[e]:this._resHeaders[e]}const n=Object.assign({},t,{status:this._status,method:this._method,headers:s});return{policy:new this.constructor(e,n,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:false,matches:true}}}},9898:(e,t,r)=>{"use strict";const{URL:s}=r(7310);const n=r(2361);const i=r(4404);const o=r(5158);const a=r(9273);const c=r(9237);const u=Symbol("currentStreamCount");const l=Symbol("request");const h=Symbol("cachedOriginSet");const d=Symbol("gracefullyClosing");const p=Symbol("length");const m=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"];const getSortedIndex=(e,t,r)=>{let s=0;let n=e.length;while(s<n){const i=s+n>>>1;if(r(e[i],t)){s=i+1}else{n=i}}return s};const compareSessions=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams;const closeCoveredSessions=(e,t)=>{for(let r=0;r<e.length;r++){const s=e[r];if(s[h].length>0&&s[h].length<t[h].length&&s[h].every((e=>t[h].includes(e)))&&s[u]+t[u]<=t.remoteSettings.maxConcurrentStreams){gracefullyClose(s)}}};const closeSessionIfCovered=(e,t)=>{for(let r=0;r<e.length;r++){const s=e[r];if(t[h].length>0&&t[h].length<s[h].length&&t[h].every((e=>s[h].includes(e)))&&t[u]+s[u]<=s.remoteSettings.maxConcurrentStreams){gracefullyClose(t);return true}}return false};const gracefullyClose=e=>{e[d]=true;if(e[u]===0){e.close()}};class Agent extends n{constructor({timeout:e=0,maxSessions:t=Number.POSITIVE_INFINITY,maxEmptySessions:r=10,maxCachedTlsSessions:s=100}={}){super();this.sessions={};this.queue={};this.timeout=e;this.maxSessions=t;this.maxEmptySessions=r;this._emptySessionCount=0;this._sessionCount=0;this.settings={enablePush:false,initialWindowSize:1024*1024*32};this.tlsSessionCache=new a({maxSize:s})}get protocol(){return"https:"}normalizeOptions(e){let t="";for(let r=0;r<m.length;r++){const s=m[r];t+=":";if(e&&e[s]!==undefined){t+=e[s]}}return t}_processQueue(){if(this._sessionCount>=this.maxSessions){this.closeEmptySessions(this.maxSessions-this._sessionCount+1);return}for(const e in this.queue){for(const t in this.queue[e]){const r=this.queue[e][t];if(!r.completed){r.completed=true;r()}}}}_isBetterSession(e,t){return e>t}_accept(e,t,r,s){let n=0;while(n<t.length&&e[u]<e.remoteSettings.maxConcurrentStreams){t[n].resolve(e);n++}t.splice(0,n);if(t.length>0){this.getSession(r,s,t);t.length=0}}getSession(e,t,r){return new Promise(((n,i)=>{if(Array.isArray(r)&&r.length>0){r=[...r];n()}else{r=[{resolve:n,reject:i}]}try{if(typeof e==="string"){e=new s(e)}else if(!(e instanceof s)){throw new TypeError("The `origin` argument needs to be a string or an URL object")}if(t){const{servername:r}=t;const{hostname:s}=e;if(r&&s!==r){throw new Error(`Origin ${s} differs from servername ${r}`)}}}catch(e){for(let t=0;t<r.length;t++){r[t].reject(e)}return}const a=this.normalizeOptions(t);const c=e.origin;if(a in this.sessions){const e=this.sessions[a];let s=-1;let n=-1;let i;for(let t=0;t<e.length;t++){const r=e[t];const o=r.remoteSettings.maxConcurrentStreams;if(o<s){break}if(!r[h].includes(c)){continue}const a=r[u];if(a>=o||r[d]||r.destroyed){continue}if(!i){s=o}if(this._isBetterSession(a,n)){i=r;n=a}}if(i){this._accept(i,r,c,t);return}}if(a in this.queue){if(c in this.queue[a]){this.queue[a][c].listeners.push(...r);return}}else{this.queue[a]={[p]:0}}const removeFromQueue=()=>{if(a in this.queue&&this.queue[a][c]===entry){delete this.queue[a][c];if(--this.queue[a][p]===0){delete this.queue[a]}}};const entry=async()=>{this._sessionCount++;const s=`${c}:${a}`;let n=false;let i;try{const m={...t};if(m.settings===undefined){m.settings=this.settings}if(m.session===undefined){m.session=this.tlsSessionCache.get(s)}const y=m.createConnection||this.createConnection;i=await y.call(this,e,m);m.createConnection=()=>i;const g=o.connect(e,m);g[u]=0;g[d]=false;const getOriginSet=()=>{const{socket:e}=g;let t;if(e.servername===false){e.servername=e.remoteAddress;t=g.originSet;e.servername=false}else{t=g.originSet}return t};const isFree=()=>g[u]<g.remoteSettings.maxConcurrentStreams;g.socket.once("session",(e=>{this.tlsSessionCache.set(s,e)}));g.once("error",(e=>{for(let t=0;t<r.length;t++){r[t].reject(e)}this.tlsSessionCache.delete(s)}));g.setTimeout(this.timeout,(()=>{g.destroy()}));g.once("close",(()=>{this._sessionCount--;if(n){this._emptySessionCount--;const e=this.sessions[a];if(e.length===1){delete this.sessions[a]}else{e.splice(e.indexOf(g),1)}}else{removeFromQueue();const e=new Error("Session closed without receiving a SETTINGS frame");e.code="HTTP2WRAPPER_NOSETTINGS";for(let t=0;t<r.length;t++){r[t].reject(e)}}this._processQueue()}));const processListeners=()=>{const e=this.queue[a];if(!e){return}const t=g[h];for(let r=0;r<t.length;r++){const s=t[r];if(s in e){const{listeners:t,completed:r}=e[s];let n=0;while(n<t.length&&isFree()){t[n].resolve(g);n++}e[s].listeners.splice(0,n);if(e[s].listeners.length===0&&!r){delete e[s];if(--e[p]===0){delete this.queue[a];break}}if(!isFree()){break}}}};g.on("origin",(()=>{g[h]=getOriginSet()||[];g[d]=false;closeSessionIfCovered(this.sessions[a],g);if(g[d]||!isFree()){return}processListeners();if(!isFree()){return}closeCoveredSessions(this.sessions[a],g)}));g.once("remoteSettings",(()=>{if(entry.destroyed){const e=new Error("Agent has been destroyed");for(let t=0;t<r.length;t++){r[t].reject(e)}g.destroy();return}if(g.setLocalWindowSize){g.setLocalWindowSize(1024*1024*4)}g[h]=getOriginSet()||[];if(g.socket.encrypted){const e=g[h][0];if(e!==c){const t=new Error(`Requested origin ${c} does not match server ${e}`);for(let e=0;e<r.length;e++){r[e].reject(t)}g.destroy();return}}removeFromQueue();{const e=this.sessions;if(a in e){const t=e[a];t.splice(getSortedIndex(t,g,compareSessions),0,g)}else{e[a]=[g]}}n=true;this._emptySessionCount++;this.emit("session",g);this._accept(g,r,c,t);if(g[u]===0&&this._emptySessionCount>this.maxEmptySessions){this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions)}g.on("remoteSettings",(()=>{if(!isFree()){return}processListeners();if(!isFree()){return}closeCoveredSessions(this.sessions[a],g)}))}));g[l]=g.request;g.request=(e,t)=>{if(g[d]){throw new Error("The session is gracefully closing. No new streams are allowed.")}const r=g[l](e,t);g.ref();if(g[u]++===0){this._emptySessionCount--}r.once("close",(()=>{if(--g[u]===0){this._emptySessionCount++;g.unref();if(this._emptySessionCount>this.maxEmptySessions||g[d]){g.close();return}}if(g.destroyed||g.closed){return}if(isFree()&&!closeSessionIfCovered(this.sessions[a],g)){closeCoveredSessions(this.sessions[a],g);processListeners();if(g[u]===0){this._processQueue()}}}));return r}}catch(e){removeFromQueue();this._sessionCount--;for(let t=0;t<r.length;t++){r[t].reject(e)}}};entry.listeners=r;entry.completed=false;entry.destroyed=false;this.queue[a][c]=entry;this.queue[a][p]++;this._processQueue()}))}request(e,t,r,s){return new Promise(((n,i)=>{this.getSession(e,t,[{reject:i,resolve:e=>{try{const t=e.request(r,s);c(t);n(t)}catch(e){i(e)}}}])}))}async createConnection(e,t){return Agent.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];const r=e.port||443;const s=e.hostname;if(typeof t.servername==="undefined"){t.servername=s}const n=i.connect(r,s,t);if(t.socket){n._peername={family:undefined,address:undefined,port:r}}return n}closeEmptySessions(e=Number.POSITIVE_INFINITY){let t=0;const{sessions:r}=this;for(const s in r){const n=r[s];for(let r=0;r<n.length;r++){const s=n[r];if(s[u]===0){t++;s.close();if(t>=e){return t}}}}return t}destroy(e){const{sessions:t,queue:r}=this;for(const r in t){const s=t[r];for(let t=0;t<s.length;t++){s[t].destroy(e)}}for(const e in r){const t=r[e];for(const e in t){t[e].destroyed=true}}this.queue={};this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}}Agent.kCurrentStreamCount=u;Agent.kGracefullyClosing=d;e.exports={Agent:Agent,globalAgent:new Agent}},7167:(e,t,r)=>{"use strict";const{URL:s,urlToHttpOptions:n}=r(7310);const i=r(3685);const o=r(5687);const a=r(6624);const c=r(9273);const{Agent:u,globalAgent:l}=r(9898);const h=r(9632);const d=r(1982);const p=r(9237);const m=new c({maxSize:100});const y=new Map;const installSocket=(e,t,r)=>{t._httpMessage={shouldKeepAlive:true};const onFree=()=>{e.emit("free",t,r)};t.on("free",onFree);const onClose=()=>{e.removeSocket(t,r)};t.on("close",onClose);const onTimeout=()=>{const{freeSockets:r}=e;for(const e of Object.values(r)){if(e.includes(t)){t.destroy();return}}};t.on("timeout",onTimeout);const onRemove=()=>{e.removeSocket(t,r);t.off("close",onClose);t.off("free",onFree);t.off("timeout",onTimeout);t.off("agentRemove",onRemove)};t.on("agentRemove",onRemove);e.emit("free",t,r)};const createResolveProtocol=(e,t=new Map,r=undefined)=>async s=>{const n=`${s.host}:${s.port}:${s.ALPNProtocols.sort()}`;if(!e.has(n)){if(t.has(n)){const e=await t.get(n);return{alpnProtocol:e.alpnProtocol}}const{path:i}=s;s.path=s.socketPath;const o=a(s,r);t.set(n,o);try{const r=await o;e.set(n,r.alpnProtocol);t.delete(n);s.path=i;return r}catch(e){t.delete(n);s.path=i;throw e}}return{alpnProtocol:e.get(n)}};const g=createResolveProtocol(m,y);e.exports=async(e,t,r)=>{if(typeof e==="string"){e=n(new s(e))}else if(e instanceof s){e=n(e)}else{e={...e}}if(typeof t==="function"||t===undefined){r=t;t=e}else{t=Object.assign(e,t)}t.ALPNProtocols=t.ALPNProtocols||["h2","http/1.1"];if(!Array.isArray(t.ALPNProtocols)||t.ALPNProtocols.length===0){throw new Error("The `ALPNProtocols` option must be an Array with at least one entry")}t.protocol=t.protocol||"https:";const a=t.protocol==="https:";t.host=t.hostname||t.host||"localhost";t.session=t.tlsSession;t.servername=t.servername||d(t.headers&&t.headers.host||t.host);t.port=t.port||(a?443:80);t._defaultAgent=a?o.globalAgent:i.globalAgent;const c=t.resolveProtocol||g;let{agent:m}=t;if(m!==undefined&&m!==false&&m.constructor.name!=="Object"){throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties")}if(a){t.resolveSocket=true;let{socket:e,alpnProtocol:s,timeout:n}=await c(t);if(n){if(e){e.destroy()}const r=new Error(`Timed out resolving ALPN: ${t.timeout} ms`);r.code="ETIMEDOUT";r.ms=t.timeout;throw r}if(e&&t.createConnection){e.destroy();e=undefined}delete t.resolveSocket;const i=s==="h2";if(m){m=i?m.http2:m.https;t.agent=m}if(m===undefined){m=i?l:o.globalAgent}if(e){if(m===false){e.destroy()}else{const r=(i?u:o.Agent).prototype.createConnection;if(m.createConnection===r){if(i){t._reuseSocket=e}else{installSocket(m,e,t)}}else{e.destroy()}}}if(i){return p(new h(t,r))}}else if(m){t.agent=m.http}return p(i.request(t,r))};e.exports.protocolCache=m;e.exports.resolveProtocol=g;e.exports.createResolveProtocol=createResolveProtocol},9632:(e,t,r)=>{"use strict";const{URL:s,urlToHttpOptions:n}=r(7310);const i=r(5158);const{Writable:o}=r(2781);const{Agent:a,globalAgent:c}=r(9898);const u=r(2575);const l=r(1818);const{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_PROTOCOL:d,ERR_HTTP_HEADERS_SENT:p}=r(7087);const m=r(4592);const y=r(3549);const g=r(9404);const{HTTP2_HEADER_STATUS:_,HTTP2_HEADER_METHOD:b,HTTP2_HEADER_PATH:w,HTTP2_HEADER_AUTHORITY:v,HTTP2_METHOD_CONNECT:E}=i.constants;const O=Symbol("headers");const S=Symbol("origin");const C=Symbol("session");const T=Symbol("options");const x=Symbol("flushedHeaders");const R=Symbol("jobs");const k=Symbol("pendingAgentPromise");class ClientRequest extends o{constructor(e,t,r){super({autoDestroy:false,emitClose:false});if(typeof e==="string"){e=n(new s(e))}else if(e instanceof s){e=n(e)}else{e={...e}}if(typeof t==="function"||t===undefined){r=t;t=e}else{t=Object.assign(e,t)}if(t.h2session){this[C]=t.h2session;if(this[C].destroyed){throw new Error("The session has been closed already")}this.protocol=this[C].socket.encrypted?"https:":"http:"}else if(t.agent===false){this.agent=new a({maxEmptySessions:0})}else if(typeof t.agent==="undefined"||t.agent===null){this.agent=c}else if(typeof t.agent.request==="function"){this.agent=t.agent}else{throw new h("options.agent",["http2wrapper.Agent-like Object","undefined","false"],t.agent)}if(this.agent){this.protocol=this.agent.protocol}if(t.protocol&&t.protocol!==this.protocol){throw new d(t.protocol,this.protocol)}if(!t.port){t.port=t.defaultPort||this.agent&&this.agent.defaultPort||443}t.host=t.hostname||t.host||"localhost";delete t.hostname;const{timeout:i}=t;t.timeout=undefined;this[O]=Object.create(null);this[R]=[];this[k]=undefined;this.socket=null;this.connection=null;this.method=t.method||"GET";if(!(this.method==="CONNECT"&&(t.path==="/"||t.path===undefined))){this.path=t.path}this.res=null;this.aborted=false;this.reusedSocket=false;const{headers:o}=t;if(o){for(const e in o){this.setHeader(e,o[e])}}if(t.auth&&!("authorization"in this[O])){this[O].authorization="Basic "+Buffer.from(t.auth).toString("base64")}t.session=t.tlsSession;t.path=t.socketPath;this[T]=t;this[S]=new s(`${this.protocol}//${t.servername||t.host}:${t.port}`);const u=t._reuseSocket;if(u){t.createConnection=(...e)=>{if(u.destroyed){return this.agent.createConnection(...e)}return u};this.agent.getSession(this[S],this[T]).catch((()=>{}))}if(i){this.setTimeout(i)}if(r){this.once("response",r)}this[x]=false}get method(){return this[O][b]}set method(e){if(e){this[O][b]=e.toUpperCase()}}get path(){const e=this.method==="CONNECT"?v:w;return this[O][e]}set path(e){if(e){const t=this.method==="CONNECT"?v:w;this[O][t]=e}}get host(){return this[S].hostname}set host(e){}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,t,r){if(this._mustNotHaveABody){r(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();const callWrite=()=>this._request.write(e,t,r);if(this._request){callWrite()}else{this[R].push(callWrite)}}_final(e){this.flushHeaders();const callEnd=()=>{if(this._mustNotHaveABody||this.method==="CONNECT"){e();return}this._request.end(e)};if(this._request){callEnd()}else{this[R].push(callEnd)}}abort(){if(this.res&&this.res.complete){return}if(!this.aborted){process.nextTick((()=>this.emit("abort")))}this.aborted=true;this.destroy()}async _destroy(e,t){if(this.res){this.res._dump()}if(this._request){this._request.destroy()}else{process.nextTick((()=>{this.emit("close")}))}try{await this[k]}catch(t){if(this.aborted){e=t}}t(e)}async flushHeaders(){if(this[x]||this.destroyed){return}this[x]=true;const e=this.method===E;const onStream=t=>{this._request=t;if(this.destroyed){t.destroy();return}if(!e){l(t,this,["timeout","continue"])}t.once("error",(e=>{this.destroy(e)}));t.once("aborted",(()=>{const{res:e}=this;if(e){e.aborted=true;e.emit("aborted");e.destroy()}else{this.destroy(new Error("The server aborted the HTTP/2 stream"))}}));const onResponse=(r,s,n)=>{const i=new u(this.socket,t.readableHighWaterMark);this.res=i;i.url=`${this[S].origin}${this.path}`;i.req=this;i.statusCode=r[_];i.headers=r;i.rawHeaders=n;i.once("end",(()=>{i.complete=true;i.socket=null;i.connection=null}));if(e){i.upgrade=true;if(this.emit("connect",i,t,Buffer.alloc(0))){this.emit("close")}else{t.destroy()}}else{t.on("data",(e=>{if(!i._dumped&&!i.push(e)){t.pause()}}));t.once("end",(()=>{if(!this.aborted){i.push(null)}}));if(!this.emit("response",i)){i._dump()}}};t.once("response",onResponse);t.once("headers",(e=>this.emit("information",{statusCode:e[_]})));t.once("trailers",((e,t,r)=>{const{res:s}=this;if(s===null){onResponse(e,t,r);return}s.trailers=e;s.rawTrailers=r}));t.once("close",(()=>{const{aborted:e,res:t}=this;if(t){if(e){t.aborted=true;t.emit("aborted");t.destroy()}const finish=()=>{t.emit("close");this.destroy();this.emit("close")};if(t.readable){t.once("end",finish)}else{finish()}return}if(!this.destroyed){this.destroy(new Error("The HTTP/2 stream has been early terminated"));this.emit("close");return}this.destroy();this.emit("close")}));this.socket=new Proxy(t,g);for(const e of this[R]){e()}this.emit("socket",this.socket)};if(!(v in this[O])&&!e){this[O][v]=this[S].host}if(this[C]){try{onStream(this[C].request(this[O]))}catch(e){this.destroy(e)}}else{this.reusedSocket=true;try{const e=this.agent.request(this[S],this[T],this[O]);this[k]=e;onStream(await e);this[k]=false}catch(e){this[k]=false;this.destroy(e)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[O])}hasHeader(e){if(typeof e!=="string"){throw new h("name","string",e)}return Boolean(this[O][e.toLowerCase()])}getHeader(e){if(typeof e!=="string"){throw new h("name","string",e)}return this[O][e.toLowerCase()]}get headersSent(){return this[x]}removeHeader(e){if(typeof e!=="string"){throw new h("name","string",e)}if(this.headersSent){throw new p("remove")}delete this[O][e.toLowerCase()]}setHeader(e,t){if(this.headersSent){throw new p("set")}m(e);y(e,t);const r=e.toLowerCase();if(r==="connection"){if(t.toLowerCase()==="keep-alive"){return}throw new Error(`Invalid 'connection' header: ${t}`)}if(r==="host"&&this.method==="CONNECT"){this[O][v]=t}else{this[O][r]=t}}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){const applyTimeout=()=>this._request.setTimeout(e,t);if(this._request){applyTimeout()}else{this[R].push(applyTimeout)}return this}get maxHeadersCount(){if(!this.destroyed&&this._request){return this._request.session.localSettings.maxHeaderListSize}return undefined}set maxHeadersCount(e){}}e.exports=ClientRequest},2575:(e,t,r)=>{"use strict";const{Readable:s}=r(2781);class IncomingMessage extends s{constructor(e,t){super({emitClose:false,autoDestroy:true,highWaterMark:t});this.statusCode=null;this.statusMessage="";this.httpVersion="2.0";this.httpVersionMajor=2;this.httpVersionMinor=0;this.headers={};this.trailers={};this.req=null;this.aborted=false;this.complete=false;this.upgrade=null;this.rawHeaders=[];this.rawTrailers=[];this.socket=e;this._dumped=false}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,t){if(!this.readableEnded){this.aborted=true}t();this.req._request.destroy(e)}setTimeout(e,t){this.req.setTimeout(e,t);return this}_dump(){if(!this._dumped){this._dumped=true;this.removeAllListeners("data");this.resume()}}_read(){if(this.req){this.req._request.resume()}}}e.exports=IncomingMessage},4645:(e,t,r)=>{"use strict";const s=r(5158);const{Agent:n,globalAgent:i}=r(9898);const o=r(9632);const a=r(2575);const c=r(7167);const{HttpOverHttp2:u,HttpsOverHttp2:l}=r(8795);const h=r(8553);const{Http2OverHttp:d,Http2OverHttps:p}=r(9794);const m=r(4592);const y=r(3549);const request=(e,t,r)=>new o(e,t,r);const get=(e,t,r)=>{const s=new o(e,t,r);s.end();return s};e.exports={...s,ClientRequest:o,IncomingMessage:a,Agent:n,globalAgent:i,request:request,get:get,auto:c,proxies:{HttpOverHttp2:u,HttpsOverHttp2:l,Http2OverHttp2:h,Http2OverHttp:d,Http2OverHttps:p},validateHeaderName:m,validateHeaderValue:y}},7885:e=>{"use strict";e.exports=e=>{const{username:t,password:r}=e.proxyOptions.url;if(t||r){const e=`${t}:${r}`;const s=`Basic ${Buffer.from(e).toString("base64")}`;return{"proxy-authorization":s,authorization:s}}return{}}},8795:(e,t,r)=>{"use strict";const s=r(4404);const n=r(3685);const i=r(5687);const o=r(1564);const{globalAgent:a}=r(9898);const c=r(6203);const u=r(1089);const l=r(7885);const createConnection=(e,t,r)=>{(async()=>{try{const{proxyOptions:n}=e;const{url:u,headers:h,raw:d}=n;const p=await a.request(u,n,{...l(e),...h,":method":"CONNECT",":authority":`${t.host}:${t.port}`});p.once("error",r);p.once("response",(n=>{const a=n[":status"];if(a!==200){r(new c(a));return}const u=e instanceof i.Agent;if(d&&u){t.socket=p;const e=s.connect(t);e.once("close",(()=>{p.destroy()}));r(null,e);return}const l=new o(p);l.encrypted=false;l._handle.getpeername=e=>{e.family=undefined;e.address=undefined;e.port=undefined};r(null,l)}))}catch(e){r(e)}})()};class HttpOverHttp2 extends n.Agent{constructor(e){super(e);u(this,e.proxyOptions)}createConnection(e,t){createConnection(this,e,t)}}class HttpsOverHttp2 extends i.Agent{constructor(e){super(e);u(this,e.proxyOptions)}createConnection(e,t){createConnection(this,e,t)}}e.exports={HttpOverHttp2:HttpOverHttp2,HttpsOverHttp2:HttpsOverHttp2}},9794:(e,t,r)=>{"use strict";const s=r(3685);const n=r(5687);const i=r(1857);const o=r(7885);const getStream=e=>new Promise(((t,r)=>{const onConnect=(s,n,i)=>{n.unshift(i);e.off("error",r);t([n,s.statusCode])};e.once("error",r);e.once("connect",onConnect)}));class Http2OverHttp extends i{async _getProxyStream(e){const{proxyOptions:t}=this;const{url:r,headers:i}=this.proxyOptions;const a=r.protocol==="https:"?n:s;const c=a.request({...t,hostname:r.hostname,port:r.port,path:e,headers:{...o(this),...i,host:e},method:"CONNECT"}).end();return getStream(c)}}e.exports={Http2OverHttp:Http2OverHttp,Http2OverHttps:Http2OverHttp}},8553:(e,t,r)=>{"use strict";const{globalAgent:s}=r(9898);const n=r(1857);const i=r(7885);const getStatusCode=e=>new Promise(((t,r)=>{e.once("error",r);e.once("response",(s=>{e.off("error",r);t(s[":status"])}))}));class Http2OverHttp2 extends n{async _getProxyStream(e){const{proxyOptions:t}=this;const r={...i(this),...t.headers,":method":"CONNECT",":authority":e};const n=await s.request(t.url,t,r);const o=await getStatusCode(n);return[n,o]}}e.exports=Http2OverHttp2},1857:(e,t,r)=>{"use strict";const{Agent:s}=r(9898);const n=r(1564);const i=r(6203);const o=r(1089);class Http2OverHttpX extends s{constructor(e){super(e);o(this,e.proxyOptions)}async createConnection(e,t){const r=`${e.hostname}:${e.port||443}`;const[s,o]=await this._getProxyStream(r);if(o!==200){throw new i(o)}if(this.proxyOptions.raw){t.socket=s}else{const e=new n(s);e.encrypted=false;e._handle.getpeername=e=>{e.family=undefined;e.address=undefined;e.port=undefined};return e}return super.createConnection(e,t)}}e.exports=Http2OverHttpX},1089:(e,t,r)=>{"use strict";const{URL:s}=r(7310);const n=r(3453);e.exports=(e,t)=>{n("proxyOptions",t,["object"]);n("proxyOptions.headers",t.headers,["object","undefined"]);n("proxyOptions.raw",t.raw,["boolean","undefined"]);n("proxyOptions.url",t.url,[s,"string"]);const r=new s(t.url);e.proxyOptions={raw:true,...t,headers:{...t.headers},url:r}}},6203:e=>{"use strict";class UnexpectedStatusCodeError extends Error{constructor(e){super(`The proxy server rejected the request with status code ${e}`);this.statusCode=e}}e.exports=UnexpectedStatusCodeError},1982:(e,t,r)=>{"use strict";const{isIP:s}=r(1808);const n=r(9491);const getHost=e=>{if(e[0]==="["){const t=e.indexOf("]");n(t!==-1);return e.slice(1,t)}const t=e.indexOf(":");if(t===-1){return e}return e.slice(0,t)};e.exports=e=>{const t=getHost(e);if(s(t)){return""}return t}},3453:e=>{"use strict";const checkType=(e,t,r)=>{const s=r.some((e=>{const r=typeof e;if(r==="string"){return typeof t===e}return t instanceof e}));if(!s){const s=r.map((e=>typeof e==="string"?e:e.name));throw new TypeError(`Expected '${e}' to be a type of ${s.join(" or ")}, got ${typeof t}`)}};e.exports=checkType},9237:e=>{"use strict";e.exports=e=>{if(e.listenerCount("error")!==0){return}e.__destroy=e._destroy;e._destroy=(...t)=>{const r=t.pop();e.__destroy(...t,(async e=>{await Promise.resolve();r(e)}))};const onError=t=>{Promise.resolve().then((()=>{e.emit("error",t)}))};e.once("error",onError);Promise.resolve().then((()=>{e.off("error",onError)}));return e}},7087:e=>{"use strict";const makeError=(t,r,s)=>{e.exports[r]=class NodeError extends t{constructor(...e){super(typeof s==="string"?s:s(e));this.name=`${super.name} [${r}]`;this.code=r}}};makeError(TypeError,"ERR_INVALID_ARG_TYPE",(e=>{const t=e[0].includes(".")?"property":"argument";let r=e[1];const s=Array.isArray(r);if(s){r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`}return`The "${e[0]}" ${t} must be ${s?"one of":"of"} type ${r}. Received ${typeof e[2]}`}));makeError(TypeError,"ERR_INVALID_PROTOCOL",(e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`));makeError(Error,"ERR_HTTP_HEADERS_SENT",(e=>`Cannot ${e[0]} headers after they are sent to the client`));makeError(TypeError,"ERR_INVALID_HTTP_TOKEN",(e=>`${e[0]} must be a valid HTTP token [${e[1]}]`));makeError(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",(e=>`Invalid value "${e[0]} for header "${e[1]}"`));makeError(TypeError,"ERR_INVALID_CHAR",(e=>`Invalid character in ${e[0]} [${e[1]}]`));makeError(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")},1199:e=>{"use strict";e.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return true;default:return false}}},1564:(e,t,r)=>{"use strict";const s=r(2781);const n=r(4404);const i=new n.TLSSocket(new s.PassThrough)._handle._parentWrap.constructor;e.exports=i},1818:e=>{"use strict";e.exports=(e,t,r)=>{for(const s of r){e.on(s,((...e)=>t.emit(s,...e)))}}},9404:(e,t,r)=>{"use strict";const{ERR_HTTP2_NO_SOCKET_MANIPULATION:s}=r(7087);const n={has(e,t){const r=e.session===undefined?e:e.session.socket;return t in e||t in r},get(e,t){switch(t){case"on":case"once":case"end":case"emit":case"destroy":return e[t].bind(e);case"writable":case"destroyed":return e[t];case"readable":if(e.destroyed){return false}return e.readable;case"setTimeout":{const{session:t}=e;if(t!==undefined){return t.setTimeout.bind(t)}return e.setTimeout.bind(e)}case"write":case"read":case"pause":case"resume":throw new s;default:{const r=e.session===undefined?e:e.session.socket;const s=r[t];return typeof s==="function"?s.bind(r):s}}},getPrototypeOf(e){if(e.session!==undefined){return Reflect.getPrototypeOf(e.session.socket)}return Reflect.getPrototypeOf(e)},set(e,t,r){switch(t){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":e[t]=r;return true;case"setTimeout":{const{session:t}=e;if(t===undefined){e.setTimeout=r}else{t.setTimeout=r}return true}case"write":case"read":case"pause":case"resume":throw new s;default:{const s=e.session===undefined?e:e.session.socket;s[t]=r;return true}}}};e.exports=n},4592:(e,t,r)=>{"use strict";const{ERR_INVALID_HTTP_TOKEN:s}=r(7087);const n=r(1199);const i=/^[\^`\-\w!#$%&*+.|~]+$/;e.exports=e=>{if(typeof e!=="string"||!i.test(e)&&!n(e)){throw new s("Header name",e)}}},3549:(e,t,r)=>{"use strict";const{ERR_HTTP_INVALID_HEADER_VALUE:s,ERR_INVALID_CHAR:n}=r(7087);const i=/[^\t\u0020-\u007E\u0080-\u00FF]/;e.exports=(e,t)=>{if(typeof t==="undefined"){throw new s(t,e)}if(i.test(t)){throw new n("header content",e)}}},2820:(e,t)=>{t.stringify=function stringify(e){if("undefined"==typeof e)return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON)e=e.toJSON();if(e&&"object"===typeof e){var t="";var r=Array.isArray(e);t=r?"[":"{";var s=true;for(var n in e){var i="function"==typeof e[n]||!r&&"undefined"===typeof e[n];if(Object.hasOwnProperty.call(e,n)&&!i){if(!s)t+=",";s=false;if(r){if(e[n]==undefined)t+="null";else t+=stringify(e[n])}else if(e[n]!==void 0){t+=stringify(n)+":"+stringify(e[n])}}}t+=r?"]":"}";return t}else if("string"===typeof e){return JSON.stringify(/^:/.test(e)?":"+e:e)}else if("undefined"===typeof e){return"null"}else return JSON.stringify(e)};t.parse=function(e){return JSON.parse(e,(function(e,t){if("string"===typeof t){if(/^:base64:/.test(t))return Buffer.from(t.substring(8),"base64");else return/^:/.test(t)?t.substring(1):t}return t}))}},1531:(e,t,r)=>{"use strict";const s=r(2361);const n=r(2820);BigInt.prototype.toJSON=function(){return this.toString()};const loadStore=e=>{const t={redis:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd"};if(e.adapter||e.uri){const r=e.adapter||/^[^:]*/.exec(e.uri)[0];return new(require(t[r]))(e)}return new Map};class Keyv extends s{constructor(e,t){super();this.opts=Object.assign({namespace:"keyv",serialize:n.stringify,deserialize:n.parse},typeof e==="string"?{uri:e}:e,t);if(!this.opts.store){const e=Object.assign({},this.opts);this.opts.store=loadStore(e)}if(typeof this.opts.store.on==="function"){this.opts.store.on("error",(e=>this.emit("error",e)))}this.opts.store.namespace=this.opts.namespace}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}get(e,t){const r=this._getKeyPrefix(e);const{store:s}=this.opts;return Promise.resolve().then((()=>s.get(r))).then((e=>typeof e==="string"?this.opts.deserialize(e):e)).then((r=>{if(r===undefined||r===null){return undefined}if(typeof r.expires==="number"&&Date.now()>r.expires){this.delete(e);return undefined}return t&&t.raw?r:r.value}))}set(e,t,r){const s=this._getKeyPrefix(e);if(typeof r==="undefined"){r=this.opts.ttl}if(r===0){r=undefined}const{store:n}=this.opts;return Promise.resolve().then((()=>{const e=typeof r==="number"?Date.now()+r:null;if(typeof t==="symbol"){this.emit("error","symbol cannot be serialized")}t={value:t,expires:e};return this.opts.serialize(t)})).then((e=>n.set(s,e,r))).then((()=>true))}delete(e){const t=this._getKeyPrefix(e);const{store:r}=this.opts;return Promise.resolve().then((()=>r.delete(t)))}clear(){const{store:e}=this.opts;return Promise.resolve().then((()=>e.clear()))}}e.exports=Keyv},9662:e=>{"use strict";e.exports=e=>{const t={};for(const[r,s]of Object.entries(e)){t[r.toLowerCase()]=s}return t}},2610:e=>{"use strict";const t=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,r)=>{if(r._readableState.autoDestroy){throw new Error("The second stream must have the `autoDestroy` option set to `false`")}const s=new Set(Object.keys(e).concat(t));const n={};for(const t of s){if(t in r){continue}n[t]={get(){const r=e[t];const s=typeof r==="function";return s?r.bind(e):r},set(r){e[t]=r},enumerable:true,configurable:false}}Object.defineProperties(r,n);e.once("aborted",(()=>{r.destroy();r.emit("aborted")}));e.once("close",(()=>{if(e.complete){if(r.readable){r.once("end",(()=>{r.emit("close")}))}else{r.emit("close")}}else{r.emit("close")}}));return r}},7952:e=>{"use strict";const t="text/plain";const r="us-ascii";const testParameter=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e));const normalizeDataURL=(e,{stripHash:s})=>{const n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!n){throw new Error(`Invalid URL: ${e}`)}let{type:i,data:o,hash:a}=n.groups;const c=i.split(";");a=s?"":a;let u=false;if(c[c.length-1]==="base64"){c.pop();u=true}const l=(c.shift()||"").toLowerCase();const h=c.map((e=>{let[t,s=""]=e.split("=").map((e=>e.trim()));if(t==="charset"){s=s.toLowerCase();if(s===r){return""}}return`${t}${s?`=${s}`:""}`})).filter(Boolean);const d=[...h];if(u){d.push("base64")}if(d.length!==0||l&&l!==t){d.unshift(l)}return`data:${d.join(";")},${u?o.trim():o}${a?`#${a}`:""}`};const normalizeUrl=(e,t)=>{t={defaultProtocol:"http:",normalizeProtocol:true,forceHttp:false,forceHttps:false,stripAuthentication:true,stripHash:false,stripTextFragment:true,stripWWW:true,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:true,removeSingleSlash:true,removeDirectoryIndex:false,sortQueryParameters:true,...t};e=e.trim();if(/^data:/i.test(e)){return normalizeDataURL(e,t)}if(/^view-source:/i.test(e)){throw new Error("`view-source:` is not supported as it is a non-standard protocol")}const r=e.startsWith("//");const s=!r&&/^\.*\//.test(e);if(!s){e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol)}const n=new URL(e);if(t.forceHttp&&t.forceHttps){throw new Error("The `forceHttp` and `forceHttps` options cannot be used together")}if(t.forceHttp&&n.protocol==="https:"){n.protocol="http:"}if(t.forceHttps&&n.protocol==="http:"){n.protocol="https:"}if(t.stripAuthentication){n.username="";n.password=""}if(t.stripHash){n.hash=""}else if(t.stripTextFragment){n.hash=n.hash.replace(/#?:~:text.*?$/i,"")}if(n.pathname){n.pathname=n.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")}if(n.pathname){try{n.pathname=decodeURI(n.pathname)}catch(e){}}if(t.removeDirectoryIndex===true){t.removeDirectoryIndex=[/^index\.[a-z]+$/]}if(Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=n.pathname.split("/");const r=e[e.length-1];if(testParameter(r,t.removeDirectoryIndex)){e=e.slice(0,e.length-1);n.pathname=e.slice(1).join("/")+"/"}}if(n.hostname){n.hostname=n.hostname.replace(/\.$/,"");if(t.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(n.hostname)){n.hostname=n.hostname.replace(/^www\./,"")}}if(Array.isArray(t.removeQueryParameters)){for(const e of[...n.searchParams.keys()]){if(testParameter(e,t.removeQueryParameters)){n.searchParams.delete(e)}}}if(t.removeQueryParameters===true){n.search=""}if(t.sortQueryParameters){n.searchParams.sort()}if(t.removeTrailingSlash){n.pathname=n.pathname.replace(/\/$/,"")}const i=e;e=n.toString();if(!t.removeSingleSlash&&n.pathname==="/"&&!i.endsWith("/")&&n.hash===""){e=e.replace(/\/$/,"")}if((t.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&t.removeSingleSlash){e=e.replace(/\/$/,"")}if(r&&!t.normalizeProtocol){e=e.replace(/^http:\/\//,"//")}if(t.stripProtocol){e=e.replace(/^(?:https?:)?\/\//,"")}return e};e.exports=normalizeUrl},1223:(e,t,r)=>{var s=r(2940);e.exports=s(once);e.exports.strict=s(onceStrict);once.proto=once((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:true});Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:true})}));function once(e){var f=function(){if(f.called)return f.value;f.called=true;return f.value=e.apply(this,arguments)};f.called=false;return f}function onceStrict(e){var f=function(){if(f.called)throw new Error(f.onceError);f.called=true;return f.value=e.apply(this,arguments)};var t=e.name||"Function wrapped with `once`";f.onceError=t+" shouldn't be called more than once";f.called=false;return f}},8341:(e,t,r)=>{var s=r(1223);var n=r(1205);var i=r(7147);var noop=function(){};var o=/^v?\.0/.test(process.version);var isFn=function(e){return typeof e==="function"};var isFS=function(e){if(!o)return false;if(!i)return false;return(e instanceof(i.ReadStream||noop)||e instanceof(i.WriteStream||noop))&&isFn(e.close)};var isRequest=function(e){return e.setHeader&&isFn(e.abort)};var destroyer=function(e,t,r,i){i=s(i);var o=false;e.on("close",(function(){o=true}));n(e,{readable:t,writable:r},(function(e){if(e)return i(e);o=true;i()}));var a=false;return function(t){if(o)return;if(a)return;a=true;if(isFS(e))return e.close(noop);if(isRequest(e))return e.abort();if(isFn(e.destroy))return e.destroy();i(t||new Error("stream was destroyed"))}};var call=function(e){e()};var pipe=function(e,t){return e.pipe(t)};var pump=function(){var e=Array.prototype.slice.call(arguments);var t=isFn(e[e.length-1]||noop)&&e.pop()||noop;if(Array.isArray(e[0]))e=e[0];if(e.length<2)throw new Error("pump requires two streams per minimum");var r;var s=e.map((function(n,i){var o=i<e.length-1;var a=i>0;return destroyer(n,o,a,(function(e){if(!r)r=e;if(e)s.forEach(call);if(o)return;s.forEach(call);t(r)}))}));return e.reduce(pipe)};e.exports=pump},9273:e=>{"use strict";class QuickLRU{constructor(e={}){if(!(e.maxSize&&e.maxSize>0)){throw new TypeError("`maxSize` must be a number greater than 0")}this.maxSize=e.maxSize;this.onEviction=e.onEviction;this.cache=new Map;this.oldCache=new Map;this._size=0}_set(e,t){this.cache.set(e,t);this._size++;if(this._size>=this.maxSize){this._size=0;if(typeof this.onEviction==="function"){for(const[e,t]of this.oldCache.entries()){this.onEviction(e,t)}}this.oldCache=this.cache;this.cache=new Map}}get(e){if(this.cache.has(e)){return this.cache.get(e)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);this.oldCache.delete(e);this._set(e,t);return t}}set(e,t){if(this.cache.has(e)){this.cache.set(e,t)}else{this._set(e,t)}return this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e)){return this.cache.get(e)}if(this.oldCache.has(e)){return this.oldCache.get(e)}}delete(e){const t=this.cache.delete(e);if(t){this._size--}return this.oldCache.delete(e)||t}clear(){this.cache.clear();this.oldCache.clear();this._size=0}*keys(){for(const[e]of this){yield e}}*values(){for(const[,e]of this){yield e}}*[Symbol.iterator](){for(const e of this.cache){yield e}for(const e of this.oldCache){const[t]=e;if(!this.cache.has(t)){yield e}}}get size(){let e=0;for(const t of this.oldCache.keys()){if(!this.cache.has(t)){e++}}return Math.min(this._size+e,this.maxSize)}}e.exports=QuickLRU},6624:(e,t,r)=>{"use strict";const s=r(4404);e.exports=(e={},t=s.connect)=>new Promise(((r,s)=>{let n=false;let i;const callback=async()=>{await o;i.off("timeout",onTimeout);i.off("error",s);if(e.resolveSocket){r({alpnProtocol:i.alpnProtocol,socket:i,timeout:n});if(n){await Promise.resolve();i.emit("timeout")}}else{i.destroy();r({alpnProtocol:i.alpnProtocol,timeout:n})}};const onTimeout=async()=>{n=true;callback()};const o=(async()=>{try{i=await t(e,callback);i.on("error",s);i.once("timeout",onTimeout)}catch(e){s(e)}})()}))},9004:(e,t,r)=>{"use strict";const s=r(2781).Readable;const n=r(9662);class Response extends s{constructor(e,t,r,s){if(typeof e!=="number"){throw new TypeError("Argument `statusCode` should be a number")}if(typeof t!=="object"){throw new TypeError("Argument `headers` should be an object")}if(!(r instanceof Buffer)){throw new TypeError("Argument `body` should be a buffer")}if(typeof s!=="string"){throw new TypeError("Argument `url` should be a string")}super();this.statusCode=e;this.headers=n(t);this.body=r;this.url=s}_read(){this.push(this.body);this.push(null)}}e.exports=Response},4294:(e,t,r)=>{e.exports=r(4219)},4219:(e,t,r)=>{"use strict";var s=r(1808);var n=r(4404);var i=r(3685);var o=r(5687);var a=r(2361);var c=r(9491);var u=r(3837);t.httpOverHttp=httpOverHttp;t.httpsOverHttp=httpsOverHttp;t.httpOverHttps=httpOverHttps;t.httpsOverHttps=httpsOverHttps;function httpOverHttp(e){var t=new TunnelingAgent(e);t.request=i.request;return t}function httpsOverHttp(e){var t=new TunnelingAgent(e);t.request=i.request;t.createSocket=createSecureSocket;t.defaultPort=443;return t}function httpOverHttps(e){var t=new TunnelingAgent(e);t.request=o.request;return t}function httpsOverHttps(e){var t=new TunnelingAgent(e);t.request=o.request;t.createSocket=createSecureSocket;t.defaultPort=443;return t}function TunnelingAgent(e){var t=this;t.options=e||{};t.proxyOptions=t.options.proxy||{};t.maxSockets=t.options.maxSockets||i.Agent.defaultMaxSockets;t.requests=[];t.sockets=[];t.on("free",(function onFree(e,r,s,n){var i=toOptions(r,s,n);for(var o=0,a=t.requests.length;o<a;++o){var c=t.requests[o];if(c.host===i.host&&c.port===i.port){t.requests.splice(o,1);c.request.onSocket(e);return}}e.destroy();t.removeSocket(e)}))}u.inherits(TunnelingAgent,a.EventEmitter);TunnelingAgent.prototype.addRequest=function addRequest(e,t,r,s){var n=this;var i=mergeOptions({request:e},n.options,toOptions(t,r,s));if(n.sockets.length>=this.maxSockets){n.requests.push(i);return}n.createSocket(i,(function(t){t.on("free",onFree);t.on("close",onCloseOrRemove);t.on("agentRemove",onCloseOrRemove);e.onSocket(t);function onFree(){n.emit("free",t,i)}function onCloseOrRemove(e){n.removeSocket(t);t.removeListener("free",onFree);t.removeListener("close",onCloseOrRemove);t.removeListener("agentRemove",onCloseOrRemove)}}))};TunnelingAgent.prototype.createSocket=function createSocket(e,t){var r=this;var s={};r.sockets.push(s);var n=mergeOptions({},r.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:false,headers:{host:e.host+":"+e.port}});if(e.localAddress){n.localAddress=e.localAddress}if(n.proxyAuth){n.headers=n.headers||{};n.headers["Proxy-Authorization"]="Basic "+new Buffer(n.proxyAuth).toString("base64")}l("making CONNECT request");var i=r.request(n);i.useChunkedEncodingByDefault=false;i.once("response",onResponse);i.once("upgrade",onUpgrade);i.once("connect",onConnect);i.once("error",onError);i.end();function onResponse(e){e.upgrade=true}function onUpgrade(e,t,r){process.nextTick((function(){onConnect(e,t,r)}))}function onConnect(n,o,a){i.removeAllListeners();o.removeAllListeners();if(n.statusCode!==200){l("tunneling socket could not be established, statusCode=%d",n.statusCode);o.destroy();var c=new Error("tunneling socket could not be established, "+"statusCode="+n.statusCode);c.code="ECONNRESET";e.request.emit("error",c);r.removeSocket(s);return}if(a.length>0){l("got illegal response body from proxy");o.destroy();var c=new Error("got illegal response body from proxy");c.code="ECONNRESET";e.request.emit("error",c);r.removeSocket(s);return}l("tunneling connection has established");r.sockets[r.sockets.indexOf(s)]=o;return t(o)}function onError(t){i.removeAllListeners();l("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var n=new Error("tunneling socket could not be established, "+"cause="+t.message);n.code="ECONNRESET";e.request.emit("error",n);r.removeSocket(s)}};TunnelingAgent.prototype.removeSocket=function removeSocket(e){var t=this.sockets.indexOf(e);if(t===-1){return}this.sockets.splice(t,1);var r=this.requests.shift();if(r){this.createSocket(r,(function(e){r.request.onSocket(e)}))}};function createSecureSocket(e,t){var r=this;TunnelingAgent.prototype.createSocket.call(r,e,(function(s){var i=e.request.getHeader("host");var o=mergeOptions({},r.options,{socket:s,servername:i?i.replace(/:.*$/,""):e.host});var a=n.connect(0,o);r.sockets[r.sockets.indexOf(s)]=a;t(a)}))}function toOptions(e,t,r){if(typeof e==="string"){return{host:e,port:t,localAddress:r}}return e}function mergeOptions(e){for(var t=1,r=arguments.length;t<r;++t){var s=arguments[t];if(typeof s==="object"){var n=Object.keys(s);for(var i=0,o=n.length;i<o;++i){var a=n[i];if(s[a]!==undefined){e[a]=s[a]}}}}return e}var l;if(process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)){l=function(){var e=Array.prototype.slice.call(arguments);if(typeof e[0]==="string"){e[0]="TUNNEL: "+e[0]}else{e.unshift("TUNNEL:")}console.error.apply(console,e)}}else{l=function(){}}t.debug=l},2940:e=>{e.exports=wrappy;function wrappy(e,t){if(e&&t)return wrappy(e)(t);if(typeof e!=="function")throw new TypeError("need wrapper function");Object.keys(e).forEach((function(t){wrapper[t]=e[t]}));return wrapper;function wrapper(){var t=new Array(arguments.length);for(var r=0;r<t.length;r++){t[r]=arguments[r]}var s=e.apply(this,t);var n=t[t.length-1];if(typeof s==="function"&&s!==n){Object.keys(n).forEach((function(e){s[e]=n[e]}))}return s}}},8529:(e,t,r)=>{const s=r(679);const n="https://api.jsonbin.io/b/";e.exports={create:(e,t)=>s.post(n,{body:t,headers:{"secret-key":e,"Content-Type":"application/json"}}).then((({body:e})=>{const{success:t,id:r}=JSON.parse(e);if(t){return{url:n+r,id:r}}else{throw new Error(`POST ${n} failed.`)}})),update:(e,t,r)=>s.put(n+t,{body:r,headers:{"secret-key":e,"Content-Type":"application/json",versioning:false}}).then((({body:e})=>{const{success:r,parentId:s}=JSON.parse(e);if(r){return{url:n+s,id:s}}else{throw new Error(`PUT ${n}/${t} failed.`)}})),delete:(e,t)=>s.delete(n+t,{headers:{"secret-key":e}}).then((({body:e})=>{const{success:r,id:s}=JSON.parse(e);if(r){return{url:n+s,id:s}}else{throw new Error(`DELETE ${n}/${t} failed.`)}}))}},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},679:(e,t,r)=>{"use strict";r.r(t);r.d(t,{CacheError:()=>CacheError,CancelError:()=>types_CancelError,HTTPError:()=>HTTPError,MaxRedirectsError:()=>MaxRedirectsError,Options:()=>Options,ParseError:()=>ParseError,ReadError:()=>ReadError,RequestError:()=>RequestError,RetryError:()=>RetryError,TimeoutError:()=>TimeoutError,UploadError:()=>UploadError,calculateRetryDelay:()=>B,create:()=>oe,default:()=>ue,got:()=>ce,isResponseOk:()=>isResponseOk,parseBody:()=>parseBody,parseLinkHeader:()=>parseLinkHeader});var s=r(7678);const n=require("node:events");class CancelError extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return true}}class PCancelable{static fn(e){return(...t)=>new PCancelable(((r,s,n)=>{t.push(n);e(...t).then(r,s)}))}constructor(e){this._cancelHandlers=[];this._isPending=true;this._isCanceled=false;this._rejectOnCancel=true;this._promise=new Promise(((t,r)=>{this._reject=r;const onResolve=e=>{if(!this._isCanceled||!onCancel.shouldReject){this._isPending=false;t(e)}};const onReject=e=>{this._isPending=false;r(e)};const onCancel=e=>{if(!this._isPending){throw new Error("The `onCancel` handler was attached after the promise settled.")}this._cancelHandlers.push(e)};Object.defineProperties(onCancel,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}});e(onResolve,onReject,onCancel)}))}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!this._isPending||this._isCanceled){return}this._isCanceled=true;if(this._cancelHandlers.length>0){try{for(const e of this._cancelHandlers){e()}}catch(e){this._reject(e);return}}if(this._rejectOnCancel){this._reject(new CancelError(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(PCancelable.prototype,Promise.prototype);function isRequest(e){return s.object(e)&&"_onResponse"in e}class RequestError extends Error{constructor(e,t,r){super(e);Object.defineProperty(this,"input",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"code",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"stack",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"response",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"request",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"timings",{enumerable:true,configurable:true,writable:true,value:void 0});Error.captureStackTrace(this,this.constructor);this.name="RequestError";this.code=t.code??"ERR_GOT_REQUEST_ERROR";this.input=t.input;if(isRequest(r)){Object.defineProperty(this,"request",{enumerable:false,value:r});Object.defineProperty(this,"response",{enumerable:false,value:r.response});this.options=r.options}else{this.options=r}this.timings=this.request?.timings;if(s.string(t.stack)&&s.string(this.stack)){const e=this.stack.indexOf(this.message)+this.message.length;const r=this.stack.slice(e).split("\n").reverse();const s=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split("\n").reverse();while(s.length>0&&s[0]===r[0]){r.shift()}this.stack=`${this.stack.slice(0,e)}${r.reverse().join("\n")}${s.reverse().join("\n")}`}}}class MaxRedirectsError extends RequestError{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e);this.name="MaxRedirectsError";this.code="ERR_TOO_MANY_REDIRECTS"}}class HTTPError extends RequestError{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request);this.name="HTTPError";this.code="ERR_NON_2XX_3XX_RESPONSE"}}class CacheError extends RequestError{constructor(e,t){super(e.message,e,t);this.name="CacheError";this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}}class UploadError extends RequestError{constructor(e,t){super(e.message,e,t);this.name="UploadError";this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}}class TimeoutError extends RequestError{constructor(e,t,r){super(e.message,e,r);Object.defineProperty(this,"timings",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"event",{enumerable:true,configurable:true,writable:true,value:void 0});this.name="TimeoutError";this.event=e.event;this.timings=t}}class ReadError extends RequestError{constructor(e,t){super(e.message,e,t);this.name="ReadError";this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}}class RetryError extends RequestError{constructor(e){super("Retrying",{},e);this.name="RetryError";this.code="ERR_RETRYING"}}const i=require("node:process");const o=require("node:buffer");const a=require("node:stream");const c=require("node:url");const u=require("node:http");var l=r(2361);var h=r(3837);var d=r(6214);const timer=e=>{if(e.timings){return e.timings}const t={start:Date.now(),socket:undefined,lookup:undefined,connect:undefined,secureConnect:undefined,upload:undefined,response:undefined,end:undefined,error:undefined,abort:undefined,phases:{wait:undefined,dns:undefined,tcp:undefined,tls:undefined,request:undefined,firstByte:undefined,download:undefined,total:undefined}};e.timings=t;const handleError=e=>{e.once(l.errorMonitor,(()=>{t.error=Date.now();t.phases.total=t.error-t.start}))};handleError(e);const onAbort=()=>{t.abort=Date.now();t.phases.total=t.abort-t.start};e.prependOnceListener("abort",onAbort);const onSocket=e=>{t.socket=Date.now();t.phases.wait=t.socket-t.start;if(h.types.isProxy(e)){return}const lookupListener=()=>{t.lookup=Date.now();t.phases.dns=t.lookup-t.socket};e.prependOnceListener("lookup",lookupListener);d(e,{connect:()=>{t.connect=Date.now();if(t.lookup===undefined){e.removeListener("lookup",lookupListener);t.lookup=t.connect;t.phases.dns=t.lookup-t.socket}t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now();t.phases.tls=t.secureConnect-t.connect}})};if(e.socket){onSocket(e.socket)}else{e.prependOnceListener("socket",onSocket)}const onUpload=()=>{t.upload=Date.now();t.phases.request=t.upload-(t.secureConnect??t.connect)};if(e.writableFinished){onUpload()}else{e.prependOnceListener("finish",onUpload)}e.prependOnceListener("response",(r=>{t.response=Date.now();t.phases.firstByte=t.response-t.upload;r.timings=t;handleError(r);r.prependOnceListener("end",(()=>{e.off("abort",onAbort);r.off("aborted",onAbort);if(t.phases.total){return}t.end=Date.now();t.phases.download=t.end-t.response;t.phases.total=t.end-t.start}));r.prependOnceListener("aborted",onAbort)}));return t};const p=timer;var m=r(8116);var y=r(2391);var g=r(1766);const _="abcdefghijklmnopqrstuvwxyz0123456789";function createBoundary(){let e=16;let t="";while(e--){t+=_[Math.random()*_.length<<0]}return t}const b=createBoundary;const getType=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function isPlainObject(e){if(getType(e)!=="object"){return false}const t=Object.getPrototypeOf(e);if(t===null||t===undefined){return true}const r=t.constructor&&t.constructor.toString();return r===Object.toString()}const w=isPlainObject;const normalizeValue=e=>String(e).replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n");const v=normalizeValue;const escapeName=e=>String(e).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22");const E=escapeName;const isFunction=e=>typeof e==="function";const O=isFunction;const isFileLike=e=>Boolean(e&&typeof e==="object"&&O(e.constructor)&&e[Symbol.toStringTag]==="File"&&O(e.stream)&&e.name!=null&&e.size!=null&&e.lastModified!=null);const isFormData=e=>Boolean(e&&O(e.constructor)&&e[Symbol.toStringTag]==="FormData"&&O(e.append)&&O(e.getAll)&&O(e.entries)&&O(e[Symbol.iterator]));const S=isFormData;var C=undefined&&undefined.__classPrivateFieldSet||function(e,t,r,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r};var T=undefined&&undefined.__classPrivateFieldGet||function(e,t,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(e):s?s.value:t.get(e)};var x,R,k,P,A,q,j,H,I,L;const N={enableAdditionalHeaders:false};class FormDataEncoder{constructor(e,t,r){x.add(this);R.set(this,"\r\n");k.set(this,void 0);P.set(this,void 0);A.set(this,"-".repeat(2));q.set(this,new TextEncoder);j.set(this,void 0);H.set(this,void 0);I.set(this,void 0);if(!isFormData(e)){throw new TypeError("Expected first argument to be a FormData instance.")}let s;if(w(t)){r=t}else{s=t}if(!s){s=b()}if(typeof s!=="string"){throw new TypeError("Expected boundary argument to be a string.")}if(r&&!w(r)){throw new TypeError("Expected options argument to be an object.")}C(this,H,e,"f");C(this,I,{...N,...r},"f");C(this,k,T(this,q,"f").encode(T(this,R,"f")),"f");C(this,P,T(this,k,"f").byteLength,"f");this.boundary=`form-data-boundary-${s}`;this.contentType=`multipart/form-data; boundary=${this.boundary}`;C(this,j,T(this,q,"f").encode(`${T(this,A,"f")}${this.boundary}${T(this,A,"f")}${T(this,R,"f").repeat(2)}`),"f");this.contentLength=String(this.getContentLength());this.headers=Object.freeze({"Content-Type":this.contentType,"Content-Length":this.contentLength});Object.defineProperties(this,{boundary:{writable:false,configurable:false},contentType:{writable:false,configurable:false},contentLength:{writable:false,configurable:false},headers:{writable:false,configurable:false}})}getContentLength(){let e=0;for(const[t,r]of T(this,H,"f")){const s=isFileLike(r)?r:T(this,q,"f").encode(v(r));e+=T(this,x,"m",L).call(this,t,s).byteLength;e+=isFileLike(s)?s.size:s.byteLength;e+=T(this,P,"f")}return e+T(this,j,"f").byteLength}*values(){for(const[e,t]of T(this,H,"f").entries()){const r=isFileLike(t)?t:T(this,q,"f").encode(v(t));yield T(this,x,"m",L).call(this,e,r);yield r;yield T(this,k,"f")}yield T(this,j,"f")}async*encode(){for(const e of this.values()){if(isFileLike(e)){yield*e.stream()}else{yield e}}}[(R=new WeakMap,k=new WeakMap,P=new WeakMap,A=new WeakMap,q=new WeakMap,j=new WeakMap,H=new WeakMap,I=new WeakMap,x=new WeakSet,L=function _FormDataEncoder_getFieldHeader(e,t){let r="";r+=`${T(this,A,"f")}${this.boundary}${T(this,R,"f")}`;r+=`Content-Disposition: form-data; name="${E(e)}"`;if(isFileLike(t)){r+=`; filename="${E(t.name)}"${T(this,R,"f")}`;r+=`Content-Type: ${t.type||"application/octet-stream"}`}if(T(this,I,"f").enableAdditionalHeaders===true){r+=`${T(this,R,"f")}Content-Length: ${isFileLike(t)?t.size:t.byteLength}`}return T(this,q,"f").encode(`${r}${T(this,R,"f").repeat(2)}`)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}}const U=null&&FormDataEncoder;const D=require("node:util");function is_form_data_isFormData(e){return s.nodeStream(e)&&s.function_(e.getBoundary)}async function getBodySize(e,t){if(t&&"content-length"in t){return Number(t["content-length"])}if(!e){return 0}if(s.string(e)){return o.Buffer.byteLength(e)}if(s.buffer(e)){return e.length}if(is_form_data_isFormData(e)){return(0,D.promisify)(e.getLength.bind(e))()}return undefined}function proxyEvents(e,t,r){const s={};for(const n of r){const eventFunction=(...e)=>{t.emit(n,...e)};s[n]=eventFunction;e.on(n,eventFunction)}return()=>{for(const[t,r]of Object.entries(s)){e.off(t,r)}}}const $=require("node:net");function unhandle(){const e=[];return{once(t,r,s){t.once(r,s);e.push({origin:t,event:r,fn:s})},unhandleAll(){for(const t of e){const{origin:e,event:r,fn:s}=t;e.removeListener(r,s)}e.length=0}}}const M=Symbol("reentry");const noop=()=>{};class timed_out_TimeoutError extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`);Object.defineProperty(this,"event",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"code",{enumerable:true,configurable:true,writable:true,value:void 0});this.name="TimeoutError";this.code="ETIMEDOUT"}}function timedOut(e,t,r){if(M in e){return noop}e[M]=true;const s=[];const{once:n,unhandleAll:i}=unhandle();const addTimeout=(e,t,r)=>{const n=setTimeout(t,e,e,r);n.unref?.();const cancel=()=>{clearTimeout(n)};s.push(cancel);return cancel};const{host:o,hostname:a}=r;const timeoutHandler=(t,r)=>{e.destroy(new timed_out_TimeoutError(t,r))};const cancelTimeouts=()=>{for(const e of s){e()}i()};e.once("error",(t=>{cancelTimeouts();if(e.listenerCount("error")===0){throw t}}));if(typeof t.request!=="undefined"){const r=addTimeout(t.request,timeoutHandler,"request");n(e,"response",(e=>{n(e,"end",r)}))}if(typeof t.socket!=="undefined"){const{socket:r}=t;const socketTimeoutHandler=()=>{timeoutHandler(r,"socket")};e.setTimeout(r,socketTimeoutHandler);s.push((()=>{e.removeListener("timeout",socketTimeoutHandler)}))}const c=typeof t.lookup!=="undefined";const u=typeof t.connect!=="undefined";const l=typeof t.secureConnect!=="undefined";const h=typeof t.send!=="undefined";if(c||u||l||h){n(e,"socket",(s=>{const{socketPath:i}=e;if(s.connecting){const e=Boolean(i??$.isIP(a??o??"")!==0);if(c&&!e&&typeof s.address().address==="undefined"){const e=addTimeout(t.lookup,timeoutHandler,"lookup");n(s,"lookup",e)}if(u){const timeConnect=()=>addTimeout(t.connect,timeoutHandler,"connect");if(e){n(s,"connect",timeConnect())}else{n(s,"lookup",(e=>{if(e===null){n(s,"connect",timeConnect())}}))}}if(l&&r.protocol==="https:"){n(s,"connect",(()=>{const e=addTimeout(t.secureConnect,timeoutHandler,"secureConnect");n(s,"secureConnect",e)}))}}if(h){const timeRequest=()=>addTimeout(t.send,timeoutHandler,"send");if(s.connecting){n(s,"connect",(()=>{n(e,"upload-complete",timeRequest())}))}else{n(e,"upload-complete",timeRequest())}}}))}if(typeof t.response!=="undefined"){n(e,"upload-complete",(()=>{const r=addTimeout(t.response,timeoutHandler,"response");n(e,"response",r)}))}if(typeof t.read!=="undefined"){n(e,"response",(e=>{const r=addTimeout(t.read,timeoutHandler,"read");n(e,"end",r)}))}return cancelTimeouts}function urlToOptions(e){e=e;const t={protocol:e.protocol,hostname:s.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};if(s.string(e.port)&&e.port.length>0){t.port=Number(e.port)}if(e.username||e.password){t.auth=`${e.username||""}:${e.password||""}`}return t}class WeakableMap{constructor(){Object.defineProperty(this,"weakMap",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"map",{enumerable:true,configurable:true,writable:true,value:void 0});this.weakMap=new WeakMap;this.map=new Map}set(e,t){if(typeof e==="object"){this.weakMap.set(e,t)}else{this.map.set(e,t)}}get(e){if(typeof e==="object"){return this.weakMap.get(e)}return this.map.get(e)}has(e){if(typeof e==="object"){return this.weakMap.has(e)}return this.map.has(e)}}const calculateRetryDelay=({attemptCount:e,retryOptions:t,error:r,retryAfter:s,computedValue:n})=>{if(r.name==="RetryError"){return 1}if(e>t.limit){return 0}const i=t.methods.includes(r.options.method);const o=t.errorCodes.includes(r.code);const a=r.response&&t.statusCodes.includes(r.response.statusCode);if(!i||!o&&!a){return 0}if(r.response){if(s){if(s>n){return 0}return s}if(r.response.statusCode===413){return 0}}const c=Math.random()*t.noise;return Math.min(2**(e-1)*1e3,t.backoffLimit)+c};const B=calculateRetryDelay;const z=require("node:tls");const F=require("node:https");function lowercaseKeys(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e.toLowerCase(),t])))}var G=r(2286);var V=r(4645);function parseLinkHeader(e){const t=[];const r=e.split(",");for(const s of r){const[r,...n]=s.split(";");const i=r.trim();if(i[0]!=="<"||i[i.length-1]!==">"){throw new Error(`Invalid format of the Link header reference: ${i}`)}const o=i.slice(1,-1);const a={};if(n.length===0){throw new Error(`Unexpected end of Link header parameters: ${n.join(";")}`)}for(const t of n){const r=t.trim();const s=r.indexOf("=");if(s===-1){throw new Error(`Failed to parse Link header: ${e}`)}const n=r.slice(0,s).trim();const i=r.slice(s+1).trim();a[n]=i}t.push({reference:o,parameters:a})}return t}const[W,J]=i.versions.node.split(".").map((e=>Number(e)));function validateSearchParameters(e){for(const t in e){const r=e[t];s.assert.any([s.string,s.number,s.boolean,s.null_,s.undefined],r)}}const K=new Map;let Q;const getGlobalDnsCache=()=>{if(Q){return Q}Q=new G;return Q};const Y={request:undefined,agent:{http:undefined,https:undefined,http2:undefined},h2session:undefined,decompress:true,timeout:{connect:undefined,lookup:undefined,read:undefined,request:undefined,response:undefined,secureConnect:undefined,send:undefined,socket:undefined},prefixUrl:"",body:undefined,form:undefined,json:undefined,cookieJar:undefined,ignoreInvalidCookies:false,searchParams:undefined,dnsLookup:undefined,dnsCache:undefined,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:true,maxRedirects:10,cache:undefined,throwHttpErrors:true,username:"",password:"",http2:false,allowGetBody:false,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:false,dnsLookupIpVersion:undefined,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:undefined,calculateDelay:({computedValue:e})=>e,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:undefined,method:"GET",createConnection:undefined,cacheOptions:{shared:undefined,cacheHeuristic:undefined,immutableMinTimeToLive:undefined,ignoreCargoCult:undefined},https:{alpnProtocols:undefined,rejectUnauthorized:undefined,checkServerIdentity:undefined,certificateAuthority:undefined,key:undefined,certificate:undefined,passphrase:undefined,pfx:undefined,ciphers:undefined,honorCipherOrder:undefined,minVersion:undefined,maxVersion:undefined,signatureAlgorithms:undefined,tlsSessionLifetime:undefined,dhparam:undefined,ecdhCurve:undefined,certificateRevocationLists:undefined},encoding:undefined,resolveBodyOnly:false,isStream:false,responseType:"text",url:undefined,pagination:{transform:e=>{if(e.request.options.responseType==="json"){return e.body}return JSON.parse(e.body)},paginate:({response:e})=>{const t=e.headers.link;if(typeof t!=="string"||t.trim()===""){return false}const r=parseLinkHeader(t);const s=r.find((e=>e.parameters.rel==="next"||e.parameters.rel==='"next"'));if(s){return{url:new c.URL(s.reference,e.url)}}return false},filter:()=>true,shouldContinue:()=>true,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:false},setHost:true,maxHeaderSize:undefined};const cloneInternals=e=>{const{hooks:t,retry:r}=e;const s={...e,context:{...e.context},cacheOptions:{...e.cacheOptions},https:{...e.https},agent:{...e.agent},headers:{...e.headers},retry:{...r,errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]},timeout:{...e.timeout},hooks:{init:[...t.init],beforeRequest:[...t.beforeRequest],beforeError:[...t.beforeError],beforeRedirect:[...t.beforeRedirect],beforeRetry:[...t.beforeRetry],afterResponse:[...t.afterResponse]},searchParams:e.searchParams?new c.URLSearchParams(e.searchParams):undefined,pagination:{...e.pagination}};if(s.url!==undefined){s.prefixUrl=""}return s};const cloneRaw=e=>{const{hooks:t,retry:r}=e;const n={...e};if(s.object(e.context)){n.context={...e.context}}if(s.object(e.cacheOptions)){n.cacheOptions={...e.cacheOptions}}if(s.object(e.https)){n.https={...e.https}}if(s.object(e.cacheOptions)){n.cacheOptions={...n.cacheOptions}}if(s.object(e.agent)){n.agent={...e.agent}}if(s.object(e.headers)){n.headers={...e.headers}}if(s.object(r)){n.retry={...r};if(s.array(r.errorCodes)){n.retry.errorCodes=[...r.errorCodes]}if(s.array(r.methods)){n.retry.methods=[...r.methods]}if(s.array(r.statusCodes)){n.retry.statusCodes=[...r.statusCodes]}}if(s.object(e.timeout)){n.timeout={...e.timeout}}if(s.object(t)){n.hooks={...t};if(s.array(t.init)){n.hooks.init=[...t.init]}if(s.array(t.beforeRequest)){n.hooks.beforeRequest=[...t.beforeRequest]}if(s.array(t.beforeError)){n.hooks.beforeError=[...t.beforeError]}if(s.array(t.beforeRedirect)){n.hooks.beforeRedirect=[...t.beforeRedirect]}if(s.array(t.beforeRetry)){n.hooks.beforeRetry=[...t.beforeRetry]}if(s.array(t.afterResponse)){n.hooks.afterResponse=[...t.afterResponse]}}if(s.object(e.pagination)){n.pagination={...e.pagination}}return n};const getHttp2TimeoutOption=e=>{const t=[e.timeout.socket,e.timeout.connect,e.timeout.lookup,e.timeout.request,e.timeout.secureConnect].filter((e=>typeof e==="number"));if(t.length>0){return Math.min(...t)}return undefined};const init=(e,t,r)=>{const s=e.hooks?.init;if(s){for(const e of s){e(t,r)}}};class Options{constructor(e,t,r){Object.defineProperty(this,"_unixOptions",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_internals",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_merging",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_init",{enumerable:true,configurable:true,writable:true,value:void 0});s.assert.any([s.string,s.urlInstance,s.object,s.undefined],e);s.assert.any([s.object,s.undefined],t);s.assert.any([s.object,s.undefined],r);if(e instanceof Options||t instanceof Options){throw new TypeError("The defaults must be passed as the third argument")}this._internals=cloneInternals(r?._internals??r??Y);this._init=[...r?._init??[]];this._merging=false;this._unixOptions=undefined;try{if(s.plainObject(e)){try{this.merge(e);this.merge(t)}finally{this.url=e.url}}else{try{this.merge(t)}finally{if(t?.url!==undefined){if(e===undefined){this.url=t.url}else{throw new TypeError("The `url` option is mutually exclusive with the `input` argument")}}else if(e!==undefined){this.url=e}}}}catch(e){e.options=this;throw e}}merge(e){if(!e){return}if(e instanceof Options){for(const t of e._init){this.merge(t)}return}e=cloneRaw(e);init(this,e,this);init(e,e,this);this._merging=true;if("isStream"in e){this.isStream=e.isStream}try{let t=false;for(const r in e){if(r==="mutableDefaults"||r==="handlers"){continue}if(r==="url"){continue}if(!(r in this)){throw new Error(`Unexpected option: ${r}`)}this[r]=e[r];t=true}if(t){this._init.push(e)}}finally{this._merging=false}}get request(){return this._internals.request}set request(e){s.assert.any([s.function_,s.undefined],e);this._internals.request=e}get agent(){return this._internals.agent}set agent(e){s.assert.plainObject(e);for(const t in e){if(!(t in this._internals.agent)){throw new TypeError(`Unexpected agent option: ${t}`)}s.assert.any([s.object,s.undefined],e[t])}if(this._merging){Object.assign(this._internals.agent,e)}else{this._internals.agent={...e}}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){s.assert.boolean(e);this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){s.assert.plainObject(e);for(const t in e){if(!(t in this._internals.timeout)){throw new Error(`Unexpected timeout option: ${t}`)}s.assert.any([s.number,s.undefined],e[t])}if(this._merging){Object.assign(this._internals.timeout,e)}else{this._internals.timeout={...e}}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){s.assert.any([s.string,s.urlInstance],e);if(e===""){this._internals.prefixUrl="";return}e=e.toString();if(!e.endsWith("/")){e+="/"}if(this._internals.prefixUrl&&this._internals.url){const{href:t}=this._internals.url;this._internals.url.href=e+t.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}get body(){return this._internals.body}set body(e){s.assert.any([s.string,s.buffer,s.nodeStream,s.generator,s.asyncGenerator,S,s.undefined],e);if(s.nodeStream(e)){s.assert.truthy(e.readable)}if(e!==undefined){s.assert.undefined(this._internals.form);s.assert.undefined(this._internals.json)}this._internals.body=e}get form(){return this._internals.form}set form(e){s.assert.any([s.plainObject,s.undefined],e);if(e!==undefined){s.assert.undefined(this._internals.body);s.assert.undefined(this._internals.json)}this._internals.form=e}get json(){return this._internals.json}set json(e){s.assert.any([s.object,s.undefined],e);if(e!==undefined){s.assert.undefined(this._internals.body);s.assert.undefined(this._internals.form)}this._internals.json=e}get url(){return this._internals.url}set url(e){s.assert.any([s.string,s.urlInstance,s.undefined],e);if(e===undefined){this._internals.url=undefined;return}if(s.string(e)&&e.startsWith("/")){throw new Error("`url` must not start with a slash")}const t=`${this.prefixUrl}${e.toString()}`;const r=new c.URL(t);this._internals.url=r;decodeURI(t);if(r.protocol==="unix:"){r.href=`http://unix${r.pathname}${r.search}`}if(r.protocol!=="http:"&&r.protocol!=="https:"){const e=new Error(`Unsupported protocol: ${r.protocol}`);e.code="ERR_UNSUPPORTED_PROTOCOL";throw e}if(this._internals.username){r.username=this._internals.username;this._internals.username=""}if(this._internals.password){r.password=this._internals.password;this._internals.password=""}if(this._internals.searchParams){r.search=this._internals.searchParams.toString();this._internals.searchParams=undefined}if(r.hostname==="unix"){const e=/(?<socketPath>.+?):(?<path>.+)/.exec(`${r.pathname}${r.search}`);if(e?.groups){const{socketPath:t,path:r}=e.groups;this._unixOptions={socketPath:t,path:r,host:""}}else{this._unixOptions=undefined}return}this._unixOptions=undefined}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){s.assert.any([s.object,s.undefined],e);if(e===undefined){this._internals.cookieJar=undefined;return}let{setCookie:t,getCookieString:r}=e;s.assert.function_(t);s.assert.function_(r);if(t.length===4&&r.length===0){t=(0,D.promisify)(t.bind(e));r=(0,D.promisify)(r.bind(e));this._internals.cookieJar={setCookie:t,getCookieString:r}}else{this._internals.cookieJar=e}}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){s.assert.boolean(e);this._internals.ignoreInvalidCookies=e}get searchParams(){if(this._internals.url){return this._internals.url.searchParams}if(this._internals.searchParams===undefined){this._internals.searchParams=new c.URLSearchParams}return this._internals.searchParams}set searchParams(e){s.assert.any([s.string,s.object,s.undefined],e);const t=this._internals.url;if(e===undefined){this._internals.searchParams=undefined;if(t){t.search=""}return}const r=this.searchParams;let n;if(s.string(e)){n=new c.URLSearchParams(e)}else if(e instanceof c.URLSearchParams){n=e}else{validateSearchParameters(e);n=new c.URLSearchParams;for(const t in e){const s=e[t];if(s===null){n.append(t,"")}else if(s===undefined){r.delete(t)}else{n.append(t,s)}}}if(this._merging){for(const e of n.keys()){r.delete(e)}for(const[e,t]of n){r.append(e,t)}}else if(t){t.search=r.toString()}else{this._internals.searchParams=r}}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){s.assert.any([s.function_,s.undefined],e);this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){s.assert.any([s.object,s.boolean,s.undefined],e);if(e===true){this._internals.dnsCache=getGlobalDnsCache()}else if(e===false){this._internals.dnsCache=undefined}else{this._internals.dnsCache=e}}get context(){return this._internals.context}set context(e){s.assert.object(e);if(this._merging){Object.assign(this._internals.context,e)}else{this._internals.context={...e}}}get hooks(){return this._internals.hooks}set hooks(e){s.assert.object(e);for(const t in e){if(!(t in this._internals.hooks)){throw new Error(`Unexpected hook event: ${t}`)}const r=t;const n=e;const i=n[r];s.assert.any([s.array,s.undefined],i);if(i){for(const e of i){s.assert.function_(e)}}if(this._merging){if(i){this._internals.hooks[r].push(...i)}}else{if(!i){throw new Error(`Missing hook event: ${t}`)}this._internals.hooks[t]=[...i]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){s.assert.boolean(e);this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){s.assert.number(e);this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){s.assert.any([s.object,s.string,s.boolean,s.undefined],e);if(e===true){this._internals.cache=K}else if(e===false){this._internals.cache=undefined}else{this._internals.cache=e}}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){s.assert.boolean(e);this._internals.throwHttpErrors=e}get username(){const e=this._internals.url;const t=e?e.username:this._internals.username;return decodeURIComponent(t)}set username(e){s.assert.string(e);const t=this._internals.url;const r=encodeURIComponent(e);if(t){t.username=r}else{this._internals.username=r}}get password(){const e=this._internals.url;const t=e?e.password:this._internals.password;return decodeURIComponent(t)}set password(e){s.assert.string(e);const t=this._internals.url;const r=encodeURIComponent(e);if(t){t.password=r}else{this._internals.password=r}}get http2(){return this._internals.http2}set http2(e){s.assert.boolean(e);this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){s.assert.boolean(e);this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){s.assert.plainObject(e);if(this._merging){Object.assign(this._internals.headers,lowercaseKeys(e))}else{this._internals.headers=lowercaseKeys(e)}}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){s.assert.boolean(e);this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(e!==undefined&&e!==4&&e!==6){throw new TypeError(`Invalid DNS lookup IP version: ${e}`)}this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){s.assert.function_(e);this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){s.assert.function_(e);this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){s.assert.plainObject(e);s.assert.any([s.function_,s.undefined],e.calculateDelay);s.assert.any([s.number,s.undefined],e.maxRetryAfter);s.assert.any([s.number,s.undefined],e.limit);s.assert.any([s.array,s.undefined],e.methods);s.assert.any([s.array,s.undefined],e.statusCodes);s.assert.any([s.array,s.undefined],e.errorCodes);s.assert.any([s.number,s.undefined],e.noise);if(e.noise&&Math.abs(e.noise)>100){throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`)}for(const t in e){if(!(t in this._internals.retry)){throw new Error(`Unexpected retry option: ${t}`)}}if(this._merging){Object.assign(this._internals.retry,e)}else{this._internals.retry={...e}}const{retry:t}=this._internals;t.methods=[...new Set(t.methods.map((e=>e.toUpperCase())))];t.statusCodes=[...new Set(t.statusCodes)];t.errorCodes=[...new Set(t.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){s.assert.any([s.string,s.undefined],e);this._internals.localAddress=e}get method(){return this._internals.method}set method(e){s.assert.string(e);this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){s.assert.any([s.function_,s.undefined],e);this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){s.assert.plainObject(e);s.assert.any([s.boolean,s.undefined],e.shared);s.assert.any([s.number,s.undefined],e.cacheHeuristic);s.assert.any([s.number,s.undefined],e.immutableMinTimeToLive);s.assert.any([s.boolean,s.undefined],e.ignoreCargoCult);for(const t in e){if(!(t in this._internals.cacheOptions)){throw new Error(`Cache option \`${t}\` does not exist`)}}if(this._merging){Object.assign(this._internals.cacheOptions,e)}else{this._internals.cacheOptions={...e}}}get https(){return this._internals.https}set https(e){s.assert.plainObject(e);s.assert.any([s.boolean,s.undefined],e.rejectUnauthorized);s.assert.any([s.function_,s.undefined],e.checkServerIdentity);s.assert.any([s.string,s.object,s.array,s.undefined],e.certificateAuthority);s.assert.any([s.string,s.object,s.array,s.undefined],e.key);s.assert.any([s.string,s.object,s.array,s.undefined],e.certificate);s.assert.any([s.string,s.undefined],e.passphrase);s.assert.any([s.string,s.buffer,s.array,s.undefined],e.pfx);s.assert.any([s.array,s.undefined],e.alpnProtocols);s.assert.any([s.string,s.undefined],e.ciphers);s.assert.any([s.string,s.buffer,s.undefined],e.dhparam);s.assert.any([s.string,s.undefined],e.signatureAlgorithms);s.assert.any([s.string,s.undefined],e.minVersion);s.assert.any([s.string,s.undefined],e.maxVersion);s.assert.any([s.boolean,s.undefined],e.honorCipherOrder);s.assert.any([s.number,s.undefined],e.tlsSessionLifetime);s.assert.any([s.string,s.undefined],e.ecdhCurve);s.assert.any([s.string,s.buffer,s.array,s.undefined],e.certificateRevocationLists);for(const t in e){if(!(t in this._internals.https)){throw new Error(`HTTPS option \`${t}\` does not exist`)}}if(this._merging){Object.assign(this._internals.https,e)}else{this._internals.https={...e}}}get encoding(){return this._internals.encoding}set encoding(e){if(e===null){throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead")}s.assert.any([s.string,s.undefined],e);this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){s.assert.boolean(e);this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){s.assert.boolean(e);this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(e===undefined){this._internals.responseType="text";return}if(e!=="text"&&e!=="buffer"&&e!=="json"){throw new Error(`Invalid \`responseType\` option: ${e}`)}this._internals.responseType=e}get pagination(){return this._internals.pagination}set pagination(e){s.assert.object(e);if(this._merging){Object.assign(this._internals.pagination,e)}else{this._internals.pagination=e}}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){s.assert.boolean(e);this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){s.assert.any([s.number,s.undefined],e);this._internals.maxHeaderSize=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,t){return(0,D.inspect)(this._internals,t)}createNativeRequestOptions(){const e=this._internals;const t=e.url;let r;if(t.protocol==="https:"){r=e.http2?e.agent:e.agent.https}else{r=e.agent.http}const{https:n}=e;let{pfx:i}=n;if(s.array(i)&&s.plainObject(i[0])){i=i.map((e=>({buf:e.buffer,passphrase:e.passphrase})))}return{...e.cacheOptions,...this._unixOptions,ALPNProtocols:n.alpnProtocols,ca:n.certificateAuthority,cert:n.certificate,key:n.key,passphrase:n.passphrase,pfx:n.pfx,rejectUnauthorized:n.rejectUnauthorized,checkServerIdentity:n.checkServerIdentity??z.checkServerIdentity,ciphers:n.ciphers,honorCipherOrder:n.honorCipherOrder,minVersion:n.minVersion,maxVersion:n.maxVersion,sigalgs:n.signatureAlgorithms,sessionTimeout:n.tlsSessionLifetime,dhparam:n.dhparam,ecdhCurve:n.ecdhCurve,crl:n.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:r,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?getHttp2TimeoutOption(e):undefined,h2session:e.h2session}}getRequestFunction(){const e=this._internals.url;const{request:t}=this._internals;if(!t&&e){return this.getFallbackRequestFunction()}return t}getFallbackRequestFunction(){const e=this._internals.url;if(!e){return}if(e.protocol==="https:"){if(this._internals.http2){if(W<15||W===15&&J<10){const e=new Error("To use the `http2` option, install Node.js 15.10.0 or above");e.code="EUNSUPPORTED";throw e}return V.auto}return F.request}return u.request}freeze(){const e=this._internals;Object.freeze(e);Object.freeze(e.hooks);Object.freeze(e.hooks.afterResponse);Object.freeze(e.hooks.beforeError);Object.freeze(e.hooks.beforeRedirect);Object.freeze(e.hooks.beforeRequest);Object.freeze(e.hooks.beforeRetry);Object.freeze(e.hooks.init);Object.freeze(e.https);Object.freeze(e.cacheOptions);Object.freeze(e.agent);Object.freeze(e.headers);Object.freeze(e.timeout);Object.freeze(e.retry);Object.freeze(e.retry.errorCodes);Object.freeze(e.retry.methods);Object.freeze(e.retry.statusCodes);Object.freeze(e.context)}}const isResponseOk=e=>{const{statusCode:t}=e;const r=e.request.options.followRedirect?299:399;return t>=200&&t<=r||t===304};class ParseError extends RequestError{constructor(e,t){const{options:r}=t.request;super(`${e.message} in "${r.url.toString()}"`,e,t.request);this.name="ParseError";this.code="ERR_BODY_PARSE_FAILURE"}}const parseBody=(e,t,r,s)=>{const{rawBody:n}=e;try{if(t==="text"){return n.toString(s)}if(t==="json"){return n.length===0?"":r(n.toString())}if(t==="buffer"){return n}}catch(t){throw new ParseError(t,e)}throw new ParseError({message:`Unknown body type '${t}'`,name:"Error"},e)};function isClientRequest(e){return e.writable&&!e.writableEnded}const X=isClientRequest;const Z=s.string(i.versions.brotli);const ee=new Set(["GET","HEAD"]);const te=new WeakableMap;const re=new Set([300,301,302,303,304,307,308]);const se=["socket","connect","continue","information","upgrade"];const core_noop=()=>{};class Request extends a.Duplex{constructor(e,t,r){super({autoDestroy:false,highWaterMark:0});Object.defineProperty(this,"constructor",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_noPipe",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"options",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"response",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"requestUrl",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"redirectUrls",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"retryCount",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_stopRetry",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_downloadedSize",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_uploadedSize",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_stopReading",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_pipedServerResponses",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_request",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_responseSize",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_bodySize",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_unproxyEvents",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_isFromCache",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_cannotHaveBody",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_triggerRead",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_cancelTimeouts",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_nativeResponse",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_flushed",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_aborted",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_requestInitialized",{enumerable:true,configurable:true,writable:true,value:void 0});this._downloadedSize=0;this._uploadedSize=0;this._stopReading=false;this._pipedServerResponses=new Set;this._cannotHaveBody=false;this._unproxyEvents=core_noop;this._triggerRead=false;this._cancelTimeouts=core_noop;this._jobs=[];this._flushed=false;this._requestInitialized=false;this._aborted=false;this.redirectUrls=[];this.retryCount=0;this._stopRetry=core_noop;const unlockWrite=()=>{this._unlockWrite()};const lockWrite=()=>{this._lockWrite()};this.on("pipe",(e=>{e.prependListener("data",unlockWrite);e.on("data",lockWrite);e.prependListener("end",unlockWrite);e.on("end",lockWrite)}));this.on("unpipe",(e=>{e.off("data",unlockWrite);e.off("data",lockWrite);e.off("end",unlockWrite);e.off("end",lockWrite)}));this.on("pipe",(e=>{if(e.headers){Object.assign(this.options.headers,e.headers)}}));this.on("newListener",(e=>{if(e==="retry"&&this.listenerCount("retry")>0){throw new Error("A retry listener has been attached already.")}}));try{this.options=new Options(e,t,r);if(!this.options.url){if(this.options.prefixUrl===""){throw new TypeError("Missing `url` property")}this.options.url=""}this.requestUrl=this.options.url}catch(e){const{options:t}=e;if(t){this.options=t}this.flush=async()=>{this.flush=async()=>{};this.destroy(e)};return}const{json:n,body:i,form:o}=this.options;if(n||i||o){this._lockWrite()}if(s.nodeStream(i)){i.once("error",(e=>{if(this._flushed){this._beforeError(new UploadError(e,this))}else{this.flush=async()=>{this.flush=async()=>{};this._beforeError(new UploadError(e,this))}}}))}}async flush(){if(this._flushed){return}this._flushed=true;try{await this._finalizeBody();if(this.destroyed){return}await this._makeRequest();if(this.destroyed){this._request?.destroy();return}for(const e of this._jobs){e()}this._jobs.length=0;this._requestInitialized=true}catch(e){this._beforeError(e)}}_beforeError(e){if(this._stopReading){return}const{response:t,options:r}=this;const s=this.retryCount+(e.name==="RetryError"?0:1);this._stopReading=true;if(!(e instanceof RequestError)){e=new RequestError(e.message,e,this)}const n=e;void(async()=>{if(t?.readable&&!t.rawBody&&!this._request?.socket?.destroyed){t.setEncoding(this.readableEncoding);const e=await this._setRawBody(t);if(e){t.body=t.rawBody.toString()}}if(this.listenerCount("retry")!==0){let o;try{let e;if(t&&"retry-after"in t.headers){e=Number(t.headers["retry-after"]);if(Number.isNaN(e)){e=Date.parse(t.headers["retry-after"])-Date.now();if(e<=0){e=1}}else{e*=1e3}}const i=r.retry;o=await i.calculateDelay({attemptCount:s,retryOptions:i,error:n,retryAfter:e,computedValue:B({attemptCount:s,retryOptions:i,error:n,retryAfter:e,computedValue:i.maxRetryAfter??r.timeout.request??Number.POSITIVE_INFINITY})})}catch(e){void this._error(new RequestError(e.message,e,this));return}if(o){await new Promise((e=>{const t=setTimeout(e,o);this._stopRetry=()=>{clearTimeout(t);e()}}));if(this.destroyed){return}try{for(const e of this.options.hooks.beforeRetry){await e(n,this.retryCount+1)}}catch(t){void this._error(new RequestError(t.message,e,this));return}if(this.destroyed){return}this.destroy();this.emit("retry",this.retryCount+1,e,(e=>{const t=new Request(r.url,e,r);t.retryCount=this.retryCount+1;i.nextTick((()=>{void t.flush()}));return t}));return}}void this._error(n)})()}_read(){this._triggerRead=true;const{response:e}=this;if(e&&!this._stopReading){if(e.readableLength){this._triggerRead=false}let t;while((t=e.read())!==null){this._downloadedSize+=t.length;const e=this.downloadProgress;if(e.percent<1){this.emit("downloadProgress",e)}this.push(t)}}}_write(e,t,r){const write=()=>{this._writeRequest(e,t,r)};if(this._requestInitialized){write()}else{this._jobs.push(write)}}_final(e){const endRequest=()=>{if(!this._request||this._request.destroyed){e();return}this._request.end((t=>{if(this._request._writableState?.errored){return}if(!t){this._bodySize=this._uploadedSize;this.emit("uploadProgress",this.uploadProgress);this._request.emit("upload-complete")}e(t)}))};if(this._requestInitialized){endRequest()}else{this._jobs.push(endRequest)}}_destroy(e,t){this._stopReading=true;this.flush=async()=>{};this._stopRetry();this._cancelTimeouts();if(this.options){const{body:e}=this.options;if(s.nodeStream(e)){e.destroy()}}if(this._request){this._request.destroy()}if(e!==null&&!s.undefined(e)&&!(e instanceof RequestError)){e=new RequestError(e.message,e,this)}t(e)}pipe(e,t){if(e instanceof u.ServerResponse){this._pipedServerResponses.add(e)}return super.pipe(e,t)}unpipe(e){if(e instanceof u.ServerResponse){this._pipedServerResponses.delete(e)}super.unpipe(e);return this}_lockWrite(){const onLockedWrite=()=>{throw new TypeError("The payload has been already provided")};this.write=onLockedWrite;this.end=onLockedWrite}_unlockWrite(){this.write=super.write;this.end=super.end}async _finalizeBody(){const{options:e}=this;const{headers:t}=e;const r=!s.undefined(e.form);const n=!s.undefined(e.json);const i=!s.undefined(e.body);const o=ee.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);this._cannotHaveBody=o;if(r||n||i){if(o){throw new TypeError(`The \`${e.method}\` method cannot be used with a body`)}const n=!s.string(t["content-type"]);if(i){if(S(e.body)){const r=new FormDataEncoder(e.body);if(n){t["content-type"]=r.headers["Content-Type"]}t["content-length"]=r.headers["Content-Length"];e.body=r.encode()}if(is_form_data_isFormData(e.body)&&n){t["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`}}else if(r){if(n){t["content-type"]="application/x-www-form-urlencoded"}const{form:r}=e;e.form=undefined;e.body=new c.URLSearchParams(r).toString()}else{if(n){t["content-type"]="application/json"}const{json:r}=e;e.json=undefined;e.body=e.stringifyJson(r)}const a=await getBodySize(e.body,e.headers);if(s.undefined(t["content-length"])&&s.undefined(t["transfer-encoding"])&&!o&&!s.undefined(a)){t["content-length"]=String(a)}}else if(o){this._lockWrite()}else{this._unlockWrite()}if(e.responseType==="json"&&!("accept"in e.headers)){e.headers.accept="application/json"}this._bodySize=Number(t["content-length"])||undefined}async _onResponseBase(e){if(this.isAborted){return}const{options:t}=this;const{url:r}=t;this._nativeResponse=e;if(t.decompress){e=y(e)}const n=e.statusCode;const i=e;i.statusMessage=i.statusMessage?i.statusMessage:u.STATUS_CODES[n];i.url=t.url.toString();i.requestUrl=this.requestUrl;i.redirectUrls=this.redirectUrls;i.request=this;i.isFromCache=this._nativeResponse.fromCache??false;i.ip=this.ip;i.retryCount=this.retryCount;this._isFromCache=i.isFromCache;this._responseSize=Number(e.headers["content-length"])||undefined;this.response=i;e.once("end",(()=>{this._responseSize=this._downloadedSize;this.emit("downloadProgress",this.downloadProgress)}));e.once("error",(t=>{this._aborted=true;e.destroy();this._beforeError(new ReadError(t,this))}));e.once("aborted",(()=>{this._aborted=true;this._beforeError(new ReadError({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}));this.emit("downloadProgress",this.downloadProgress);const a=e.headers["set-cookie"];if(s.object(t.cookieJar)&&a){let e=a.map((async e=>t.cookieJar.setCookie(e,r.toString())));if(t.ignoreInvalidCookies){e=e.map((async e=>{try{await e}catch{}}))}try{await Promise.all(e)}catch(e){this._beforeError(e);return}}if(this.isAborted){return}if(t.followRedirect&&e.headers.location&&re.has(n)){e.resume();this._cancelTimeouts();this._unproxyEvents();if(this.redirectUrls.length>=t.maxRedirects){this._beforeError(new MaxRedirectsError(this));return}this._request=undefined;const s=new Options(undefined,undefined,this.options);const a=n===303&&s.method!=="GET"&&s.method!=="HEAD";if(a||s.methodRewriting){s.method="GET";s.body=undefined;s.json=undefined;s.form=undefined;delete s.headers["content-length"]}try{const t=o.Buffer.from(e.headers.location,"binary").toString();const n=new c.URL(t,r);if(n.hostname!==r.hostname||n.port!==r.port){if("host"in s.headers){delete s.headers.host}if("cookie"in s.headers){delete s.headers.cookie}if("authorization"in s.headers){delete s.headers.authorization}if(s.username||s.password){s.username="";s.password=""}}else{n.username=s.username;n.password=s.password}this.redirectUrls.push(n);s.prefixUrl="";s.url=n;for(const e of s.hooks.beforeRedirect){await e(s,i)}this.emit("redirect",s,i);this.options=s;await this._makeRequest()}catch(e){this._beforeError(e);return}return}if(t.isStream&&t.throwHttpErrors&&!isResponseOk(i)){this._beforeError(new HTTPError(i));return}e.on("readable",(()=>{if(this._triggerRead){this._read()}}));this.on("resume",(()=>{e.resume()}));this.on("pause",(()=>{e.pause()}));e.once("end",(()=>{this.push(null)}));if(this._noPipe){const t=await this._setRawBody();if(t){this.emit("response",e)}return}this.emit("response",e);for(const r of this._pipedServerResponses){if(r.headersSent){continue}for(const s in e.headers){const n=t.decompress?s!=="content-encoding":true;const i=e.headers[s];if(n){r.setHeader(s,i)}}r.statusCode=n}}async _setRawBody(e=this){if(e.readableEnded){return false}try{const t=await(0,g.buffer)(e);if(!this.isAborted){this.response.rawBody=t;return true}}catch{}return false}async _onResponse(e){try{await this._onResponseBase(e)}catch(e){this._beforeError(e)}}_onRequest(e){const{options:t}=this;const{timeout:r,url:s}=t;p(e);if(this.options.http2){e.setTimeout(0)}this._cancelTimeouts=timedOut(e,r,s);const n=t.cache?"cacheableResponse":"response";e.once(n,(e=>{void this._onResponse(e)}));e.once("error",(t=>{this._aborted=true;e.destroy();t=t instanceof timed_out_TimeoutError?new TimeoutError(t,this.timings,this):new RequestError(t.message,t,this);this._beforeError(t)}));this._unproxyEvents=proxyEvents(e,this,se);this._request=e;this.emit("uploadProgress",this.uploadProgress);this._sendBody();this.emit("request",e)}async _asyncWrite(e){return new Promise(((t,r)=>{super.write(e,(e=>{if(e){r(e);return}t()}))}))}_sendBody(){const{body:e}=this.options;const t=this.redirectUrls.length===0?this:this._request??this;if(s.nodeStream(e)){e.pipe(t)}else if(s.generator(e)||s.asyncGenerator(e)){(async()=>{try{for await(const t of e){await this._asyncWrite(t)}super.end()}catch(e){this._beforeError(e)}})()}else{this._unlockWrite();if(!s.undefined(e)){this._writeRequest(e,undefined,(()=>{}));t.end();this._lockWrite()}else if(this._cannotHaveBody||this._noPipe){t.end();this._lockWrite()}}}_prepareCache(e){if(!te.has(e)){te.set(e,new m(((e,t)=>{const r=e._request(e,t);if(s.promise(r)){r.once=(e,t)=>{if(e==="error"){(async()=>{try{await r}catch(e){t(e)}})()}else if(e==="abort"){(async()=>{try{const e=await r;e.once("abort",t)}catch{}})()}else{throw new Error(`Unknown HTTP2 promise event: ${e}`)}return r}}return r}),e))}}async _createCacheableRequest(e,t){return new Promise(((r,s)=>{Object.assign(t,urlToOptions(e));let n;const i=te.get(t.cache)(t,(async e=>{e._readableState.autoDestroy=false;if(n){const fix=()=>{if(e.req){e.complete=e.req.res.complete}};e.prependOnceListener("end",fix);fix();(await n).emit("cacheableResponse",e)}r(e)}));i.once("error",s);i.once("request",(async e=>{n=e;r(n)}))}))}async _makeRequest(){const{options:e}=this;const{headers:t,username:r,password:n}=e;const i=e.cookieJar;for(const e in t){if(s.undefined(t[e])){delete t[e]}else if(s.null_(t[e])){throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`)}}if(e.decompress&&s.undefined(t["accept-encoding"])){t["accept-encoding"]=Z?"gzip, deflate, br":"gzip, deflate"}if(r||n){const e=o.Buffer.from(`${r}:${n}`).toString("base64");t.authorization=`Basic ${e}`}if(i){const r=await i.getCookieString(e.url.toString());if(s.nonEmptyString(r)){t.cookie=r}}e.prefixUrl="";let a;for(const t of e.hooks.beforeRequest){const r=await t(e);if(!s.undefined(r)){a=()=>r;break}}if(!a){a=e.getRequestFunction()}const c=e.url;this._requestOptions=e.createNativeRequestOptions();if(e.cache){this._requestOptions._request=a;this._requestOptions.cache=e.cache;this._prepareCache(e.cache)}const u=e.cache?this._createCacheableRequest:a;try{let t=u(c,this._requestOptions);if(s.promise(t)){t=await t}if(s.undefined(t)){t=e.getFallbackRequestFunction()(c,this._requestOptions);if(s.promise(t)){t=await t}}if(X(t)){this._onRequest(t)}else if(this.writable){this.once("finish",(()=>{void this._onResponse(t)}));this._sendBody()}else{void this._onResponse(t)}}catch(e){if(e instanceof m.CacheError){throw new CacheError(e,this)}throw e}}async _error(e){try{for(const t of this.options.hooks.beforeError){e=await t(e)}}catch(t){e=new RequestError(t.message,t,this)}this.destroy(e)}_writeRequest(e,t,r){if(!this._request||this._request.destroyed){return}this._request.write(e,t,(s=>{if(!s){this._uploadedSize+=o.Buffer.byteLength(e,t);const r=this.uploadProgress;if(r.percent<1){this.emit("uploadProgress",r)}}r(s)}))}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??undefined}get downloadProgress(){let e;if(this._responseSize){e=this._downloadedSize/this._responseSize}else if(this._responseSize===this._downloadedSize){e=1}else{e=0}return{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;if(this._bodySize){e=this._uploadedSize/this._bodySize}else if(this._bodySize===this._uploadedSize){e=1}else{e=0}return{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}}class types_CancelError extends RequestError{constructor(e){super("Promise was canceled",{},e);this.name="CancelError";this.code="ERR_CANCELED"}get isCanceled(){return true}}const ne=["request","response","redirect","uploadProgress","downloadProgress"];function asPromise(e){let t;let r;let i;const o=new n.EventEmitter;const a=new PCancelable(((n,c,u)=>{u((()=>{t.destroy()}));u.shouldReject=false;u((()=>{c(new types_CancelError(t))}));const makeRequest=l=>{u((()=>{}));const h=e??new Request(undefined,undefined,i);h.retryCount=l;h._noPipe=true;t=h;h.once("response",(async e=>{const t=(e.headers["content-encoding"]??"").toLowerCase();const i=t==="gzip"||t==="deflate"||t==="br";const{options:o}=h;if(i&&!o.decompress){e.body=e.rawBody}else{try{e.body=parseBody(e,o.responseType,o.parseJson,o.encoding)}catch(t){e.body=e.rawBody.toString();if(isResponseOk(e)){h._beforeError(t);return}}}try{const t=o.hooks.afterResponse;for(const[r,n]of t.entries()){e=await n(e,(async e=>{o.merge(e);o.prefixUrl="";if(e.url){o.url=e.url}o.hooks.afterResponse=o.hooks.afterResponse.slice(0,r);throw new RetryError(h)}));if(!(s.object(e)&&s.number(e.statusCode)&&!s.nullOrUndefined(e.body))){throw new TypeError("The `afterResponse` hook returned an invalid value")}}}catch(e){h._beforeError(e);return}r=e;if(!isResponseOk(e)){h._beforeError(new HTTPError(e));return}h.destroy();n(h.options.resolveBodyOnly?e.body:e)}));const onError=e=>{if(a.isCanceled){return}const{options:t}=h;if(e instanceof HTTPError&&!t.throwHttpErrors){const{response:t}=e;h.destroy();n(h.options.resolveBodyOnly?t.body:t);return}c(e)};h.once("error",onError);const d=h.options?.body;h.once("retry",((t,r)=>{e=undefined;const n=h.options.body;if(d===n&&s.nodeStream(n)){r.message="Cannot retry with consumed body stream";onError(r);return}i=h.options;makeRequest(t)}));proxyEvents(h,o,ne);if(s.undefined(e)){void h.flush()}};makeRequest(0)}));a.on=(e,t)=>{o.on(e,t);return a};const shortcut=e=>{const t=(async()=>{await a;const{options:t}=r.request;return parseBody(r,e,t.parseJson,t.encoding)})();Object.defineProperties(t,Object.getOwnPropertyDescriptors(a));return t};a.json=()=>{if(t.options){const{headers:e}=t.options;if(!t.writableFinished&&!("accept"in e)){e.accept="application/json"}}return shortcut("json")};a.buffer=()=>shortcut("buffer");a.text=()=>shortcut("text");return a}const delay=async e=>new Promise((t=>{setTimeout(t,e)}));const isGotInstance=e=>s.function_(e);const ie=["get","post","put","patch","head","delete"];const create=e=>{e={options:new Options(undefined,undefined,e.options),handlers:[...e.handlers],mutableDefaults:e.mutableDefaults};Object.defineProperty(e,"mutableDefaults",{enumerable:true,configurable:false,writable:false});const got=(t,r,n=e.options)=>{const i=new Request(t,r,n);let o;const lastHandler=e=>{i.options=e;i._noPipe=!e.isStream;void i.flush();if(e.isStream){return i}if(!o){o=asPromise(i)}return o};let a=0;const iterateHandlers=t=>{const r=e.handlers[a++]??lastHandler;const n=r(t,iterateHandlers);if(s.promise(n)&&!i.options.isStream){if(!o){o=asPromise(i)}if(n!==o){const e=Object.getOwnPropertyDescriptors(o);for(const t in e){if(t in n){delete e[t]}}Object.defineProperties(n,e);n.cancel=o.cancel}}return n};return iterateHandlers(i.options)};got.extend=(...t)=>{const r=new Options(undefined,undefined,e.options);const s=[...e.handlers];let n;for(const e of t){if(isGotInstance(e)){r.merge(e.defaults.options);s.push(...e.defaults.handlers);n=e.defaults.mutableDefaults}else{r.merge(e);if(e.handlers){s.push(...e.handlers)}n=e.mutableDefaults}}return create({options:r,handlers:s,mutableDefaults:Boolean(n)})};const paginateEach=async function*(t,r){let n=new Options(t,r,e.options);n.resolveBodyOnly=false;const{pagination:i}=n;s.assert.function_(i.transform);s.assert.function_(i.shouldContinue);s.assert.function_(i.filter);s.assert.function_(i.paginate);s.assert.number(i.countLimit);s.assert.number(i.requestLimit);s.assert.number(i.backoff);const o=[];let{countLimit:a}=i;let c=0;while(c<i.requestLimit){if(c!==0){await delay(i.backoff)}const e=await got(undefined,undefined,n);const t=await i.transform(e);const r=[];s.assert.array(t);for(const e of t){if(i.filter({item:e,currentItems:r,allItems:o})){if(!i.shouldContinue({item:e,currentItems:r,allItems:o})){return}yield e;if(i.stackAllItems){o.push(e)}r.push(e);if(--a<=0){return}}}const u=i.paginate({response:e,currentItems:r,allItems:o});if(u===false){return}if(u===e.request.options){n=e.request.options}else{n.merge(u);s.assert.any([s.urlInstance,s.undefined],u.url);if(u.url!==undefined){n.prefixUrl="";n.url=u.url}}c++}};got.paginate=paginateEach;got.paginate.all=async(e,t)=>{const r=[];for await(const s of paginateEach(e,t)){r.push(s)}return r};got.paginate.each=paginateEach;got.stream=(e,t)=>got(e,{...t,isStream:true});for(const e of ie){got[e]=(t,r)=>got(t,{...r,method:e});got.stream[e]=(t,r)=>got(t,{...r,method:e,isStream:true})}if(!e.mutableDefaults){Object.freeze(e.handlers);e.options.freeze()}Object.defineProperty(got,"defaults",{value:e,writable:false,configurable:false,enumerable:true});return got};const oe=create;const ae={options:new Options,handlers:[],mutableDefaults:false};const ce=oe(ae);const ue=ce}};var t={};function __nccwpck_require__(r){var s=t[r];if(s!==undefined){return s.exports}var n=t[r]={exports:{}};var i=true;try{e[r].call(n.exports,n,n.exports,__nccwpck_require__);i=false}finally{if(i)delete t[r]}return n.exports}(()=>{__nccwpck_require__.d=(e,t)=>{for(var r in t){if(__nccwpck_require__.o(t,r)&&!__nccwpck_require__.o(e,r)){Object.defineProperty(e,r,{enumerable:true,get:t[r]})}}}})();(()=>{__nccwpck_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{__nccwpck_require__.r=e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var r={};(()=>{const e=__nccwpck_require__(2186);const t=__nccwpck_require__(8529);(async()=>{let r;const s=e.getInput("method");try{switch(s){case"CREATE":r=await t.create(e.getInput("api_key"),e.getInput("body"));break;case"UPDATE":r=await t.update(e.getInput("api_key"),e.getInput("bin_id"),e.getInput("body"));break;case"DELETE":r=await t.delete(e.getInput("api_key"),e.getInput("bin_id"));break;default:e.setFailed(`${s} method is not supported.`);return}}catch(t){e.setFailed(t.message);return}e.setOutput("bin_id",r.id);e.setOutput("url",r.url)})()})();module.exports=r})();